<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Checkout on KALPESH MEHTA</title>
    <link>http://localhost:1313/blog/checkout/</link>
    <description>Recent content in Checkout on KALPESH MEHTA</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <managingEditor>k@lpe.sh (Kalpesh Mehta)</managingEditor>
    <webMaster>k@lpe.sh (Kalpesh Mehta)</webMaster>
    <copyright>Copyright © 2025 kalpesh mehta</copyright>
    <lastBuildDate>Thu, 21 Aug 2014 20:49:54 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/blog/checkout/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Magento check if customer registered in checkout page</title>
      <link>http://localhost:1313/magento-check-if-customer-registered-in-checkout-page/</link>
      <pubDate>Thu, 21 Aug 2014 20:49:54 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-check-if-customer-registered-in-checkout-page/</guid>
      <description>&lt;p&gt;If you want to check if the customer is guest, registered or just register to the site when they place the order, below script will help you identify that in success.phtml file.&lt;/p&gt;&#xA;&lt;p&gt;You can find success / order confirmation phtml file at:&lt;br&gt;&#xA;app/design/frontend/[package]/[theme]/template/checkout/success.phtml&lt;/p&gt;&#xA;&lt;p&gt;Just at the end of this file put below lines of code:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#666&#34;&gt;&amp;lt;?&lt;/span&gt;php &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;sales/order&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByIncrementId&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getOrderId&lt;/span&gt;());  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$quoteId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getQuoteId&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;quote’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$quoteId&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$method&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCheckoutMethod&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$customer_email&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCustomerEmail&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$method&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; ‘register’){ &lt;span style=&#34;color:#080&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle if customer just registered to your site  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } elseif($method == &amp;#39;guest&amp;#39;) {??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle if customer is guest  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } else { ??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle for logged in customer  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } ??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If you want to check if the customer is guest, registered or just register to the site when they place the order, below script will help you identify that in success.phtml file.</p>
<p>You can find success / order confirmation phtml file at:<br>
app/design/frontend/[package]/[theme]/template/checkout/success.phtml</p>
<p>Just at the end of this file put below lines of code:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#666">&lt;?</span>php <span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(<span style="color:#b44">&#39;sales/order&#39;</span>)<span style="color:#666">-&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#b44">loadByIncrementId</span>(<span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">getOrderId</span>());  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$quoteId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getQuoteId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$quote</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>quote’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$quoteId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$method</span> <span style="color:#666">=</span> <span style="color:#b8860b">$quote</span><span style="color:#666">-&gt;</span><span style="color:#b44">getCheckoutMethod</span>(<span style="color:#a2f;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customer_email</span> <span style="color:#666">=</span> <span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getCustomerEmail</span>();  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#b8860b">$method</span> <span style="color:#666">==</span> ‘register’){ <span style="color:#080">?&gt;</span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle if customer just registered to your site  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } elseif($method == &#39;guest&#39;) {??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle if customer is guest  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } else { ??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle for logged in customer  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } ??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span></code></pre></div></p>
<p>In the same file, success.phtml, you can request for order number, customer email, customer id, subtotal, grandtotal, order ID just created etc. like this:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_customerId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘customer<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCustomerId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$lastOrderId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getLastOrderId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘sales<span style="color:#666">/</span>order’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$lastOrderId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_totalData</span> <span style="color:#666">=</span><span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_sub</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘subtotal’];  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_orderEmail</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘customer_email’];  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_orderNumber</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘increment_id’];  
</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento disable guest checkout / enable guest checkout</title>
      <link>http://localhost:1313/magento-disable-guest-checkout-/-enable-guest-checkout/</link>
      <pubDate>Sun, 26 May 2013 17:42:39 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-disable-guest-checkout-/-enable-guest-checkout/</guid>
      <description>&lt;p&gt;By default the guest checkout in Magento is enabled and visitors can place an order without registering to the website. Some websites require mandatory login for placing orders, and this default feature should be turned off to disallow guest checkout.&lt;/p&gt;&#xA;&lt;p&gt;To disable guest checkout, navigate to:&lt;/p&gt;&#xA;&lt;p&gt;&lt;em&gt;System &amp;gt; Configuration &amp;gt; Sales section &amp;gt; Checkout &amp;gt; Checkout Options&lt;/em&gt;&lt;br&gt;&#xA;Set &lt;em&gt;Allow Guest Checkout&lt;/em&gt; to &lt;em&gt;No&lt;/em&gt;&lt;/p&gt;&#xA;&lt;p&gt;This will now disable any guest checkout in your site.&lt;br&gt;&#xA;To enable guest checkout, simply set the above dropdown option to &lt;em&gt;Yes&lt;/em&gt;.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>By default the guest checkout in Magento is enabled and visitors can place an order without registering to the website. Some websites require mandatory login for placing orders, and this default feature should be turned off to disallow guest checkout.</p>
<p>To disable guest checkout, navigate to:</p>
<p><em>System &gt; Configuration &gt; Sales section &gt; Checkout &gt; Checkout Options</em><br>
Set <em>Allow Guest Checkout</em> to <em>No</em></p>
<p>This will now disable any guest checkout in your site.<br>
To enable guest checkout, simply set the above dropdown option to <em>Yes</em>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Buy: Pinterest Auto Pin images right from your website!</title>
      <link>http://localhost:1313/buy-pinterest-auto-pin-images-right-from-your-website/</link>
      <pubDate>Fri, 02 Nov 2012 12:00:53 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/buy-pinterest-auto-pin-images-right-from-your-website/</guid>
      <description>&lt;p&gt;Pinterest has yet not released their API which can help developers to integrate to the system and autopin images directly from their website/blog. Yet, I have created an Pinterest API in PHP which will post your image to Pinterest with message, link and price.&lt;/p&gt;&#xA;&lt;p&gt;Just after entering correct email and password of your pinterest account, and providing Image URL, Message and link URL, you will be shown the list of boards you have, so that you can select any one and pin the image on it right from your website! Sounds interesting!? Here is the image that will help you understand how it works:&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Pinterest has yet not released their API which can help developers to integrate to the system and autopin images directly from their website/blog. Yet, I have created an Pinterest API in PHP which will post your image to Pinterest with message, link and price.</p>
<p>Just after entering correct email and password of your pinterest account, and providing Image URL, Message and link URL, you will be shown the list of boards you have, so that you can select any one and pin the image on it right from your website! Sounds interesting!? Here is the image that will help you understand how it works:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Nothing complicated, very easy to use, one click to pin your image directly to pinterest, click below button to buy it now! <a href="http://ka.lpe.sh/contact-me">Contact me</a> for any questions!<br>
Price: <!-- raw HTML omitted -->$49<!-- raw HTML omitted --> $39 <!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><img src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" alt=""></p>
<!-- raw HTML omitted -->
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Register guest user to website if email provided</title>
      <link>http://localhost:1313/magento-register-guest-user-to-website-if-email-provided/</link>
      <pubDate>Sat, 31 Dec 2011 13:03:10 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-register-guest-user-to-website-if-email-provided/</guid>
      <description>&lt;p&gt;If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.&lt;/p&gt;&#xA;&lt;p&gt;So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.</p>
<p>So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$e</span> <span style="color:#666">=</span> <span style="color:#b8860b">$email</span>; <span style="color:#080;font-style:italic">//provided by guest user
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$store</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">app</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getStore</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$websiteId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">app</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getWebsite</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘customer<span style="color:#666">/</span>customer’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">website_id</span> <span style="color:#666">=</span> <span style="color:#b8860b">$websiteId</span>;  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setStore</span>(<span style="color:#b8860b">$store</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$prefix</span> <span style="color:#666">=</span> “mag”;  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$pwd</span> <span style="color:#666">=</span> uniqid(<span style="color:#b8860b">$prefix</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$session</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$fname</span> <span style="color:#666">=</span> <span style="color:#b8860b">$session</span><span style="color:#666">-&gt;</span><span style="color:#b44">getFirstname</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$lname</span> <span style="color:#666">=</span> <span style="color:#b8860b">$session</span><span style="color:#666">-&gt;</span><span style="color:#b44">getLastname</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="">$</span>customerObj<span style="color:#666">-&gt;</span><span style="color:#b44">setEmail</span>(<span style="color:#b8860b">$e</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setFirstname</span>(‘Guest’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setLastname</span>(‘Guest’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setPassword</span>(<span style="color:#b8860b">$pwd</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">sendNewAccountEmail</span>(‘confirmed’); <span style="color:#080;font-style:italic">//auto confirmed  
</span></span></span></code></pre></div>
<p>UPDATE: It depends where you want to keep this functionality on your site. I have put it in saveShippingMethodAction() function of Mage/Checkout/controllers/OnepageController.php file after extending. Don’t forget, this code should only be run if customer is guest.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Getting back shopping cart items after order fails</title>
      <link>http://localhost:1313/magento-getting-back-shopping-cart-items-after-order-fails/</link>
      <pubDate>Sat, 31 Dec 2011 12:09:56 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-getting-back-shopping-cart-items-after-order-fails/</guid>
      <description>&lt;p&gt;It’s very awkward if users place an order in your website and by chance the order fails, from end user side or some technical glitch, shopping cart becomes empty. User have to again add items in cart and go through the process which becomes tedious and may be changing their mind to shop.&lt;/p&gt;&#xA;&lt;p&gt;So here’s a code that does the trick and preserves shopping cart content even if order gets failed.&lt;br&gt;&#xA;Open your file where you’re handling your order failure action in frontend. (generally &lt;strong&gt;Mage/Checkout/controllers/OnepageController.php&lt;/strong&gt;)&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;failureAction&lt;/span&gt;()  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$lastQuoteId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getOnepage&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCheckout&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getLastQuoteId&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$lastOrderId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getOnepage&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCheckout&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getLastOrderId&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$lastQuoteId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp;&lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp; &lt;span style=&#34;color:#b8860b&#34;&gt;$lastOrderId&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$orderModel&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$lastOrderId&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$orderModel&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;canCancel&lt;/span&gt;()) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;quote’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$lastQuoteId&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;setIsActive&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;save&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$orderModel&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;cancel&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$orderModel&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;setStatus&lt;/span&gt;(‘canceled’);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$orderModel&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;save&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSingleton&lt;/span&gt;(‘core&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;session’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;setFailureMsg&lt;/span&gt;(‘order_failed’);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSingleton&lt;/span&gt;(‘checkout&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;session’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;setFirstTimeChk&lt;/span&gt;(‘0’);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;_redirect&lt;/span&gt;(‘kcheckout&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;index&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;payment’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(“_forced_secure” &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;));  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt;;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$lastQuoteId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$lastOrderId&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;_redirect&lt;/span&gt;(‘checkout&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;cart’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(“_forced_secure” &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;));  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;return&lt;/span&gt;;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadLayout&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;renderLayout&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>It’s very awkward if users place an order in your website and by chance the order fails, from end user side or some technical glitch, shopping cart becomes empty. User have to again add items in cart and go through the process which becomes tedious and may be changing their mind to shop.</p>
<p>So here’s a code that does the trick and preserves shopping cart content even if order gets failed.<br>
Open your file where you’re handling your order failure action in frontend. (generally <strong>Mage/Checkout/controllers/OnepageController.php</strong>)<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">function</span> <span style="color:#00a000">failureAction</span>()  
</span></span><span style="display:flex;"><span>{  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$lastQuoteId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">getOnepage</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getCheckout</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getLastQuoteId</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$lastOrderId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">getOnepage</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getCheckout</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getLastOrderId</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#b8860b">$lastQuoteId</span> <span style="color:#666">&amp;</span>amp;<span style="color:#666">&amp;</span>amp; <span style="color:#b8860b">$lastOrderId</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$orderModel</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$lastOrderId</span>);  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#b8860b">$orderModel</span><span style="color:#666">-&gt;</span><span style="color:#b44">canCancel</span>()) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$quote</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>quote’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$lastQuoteId</span>);  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$quote</span><span style="color:#666">-&gt;</span><span style="color:#b44">setIsActive</span>(<span style="color:#a2f;font-weight:bold">true</span>)<span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$orderModel</span><span style="color:#666">-&gt;</span><span style="color:#b44">cancel</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$orderModel</span><span style="color:#666">-&gt;</span><span style="color:#b44">setStatus</span>(‘canceled’);  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$orderModel</span><span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘core<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">setFailureMsg</span>(‘order_failed’);  
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">setFirstTimeChk</span>(‘0’);  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">_redirect</span>(‘kcheckout<span style="color:#666">/</span>index<span style="color:#666">/</span>payment’, <span style="color:#a2f;font-weight:bold">array</span>(“_forced_secure” <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">true</span>));  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span><span style="color:#b8860b">$lastQuoteId</span> <span style="color:#666">||</span> <span style="color:#666">!</span><span style="color:#b8860b">$lastOrderId</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">_redirect</span>(‘checkout<span style="color:#666">/</span>cart’, <span style="color:#a2f;font-weight:bold">array</span>(“_forced_secure” <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">true</span>));  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">return</span>;  
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">loadLayout</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">renderLayout</span>();  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></p>
<p>Be noted here that we don’t have here onepage checkout so we’re redirecting user to payment page after restoring the cart. You can redirect user to any page as per your need after the cart is restored and previous order is cancelled.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Get checkout cart total details | Subtotal /Grandtotal /Discount /Tax</title>
      <link>http://localhost:1313/magento-get-checkout-cart-total-details-subtotal-/grandtotal-/discount-/tax/</link>
      <pubDate>Mon, 10 Oct 2011 14:22:36 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-get-checkout-cart-total-details-subtotal-/grandtotal-/discount-/tax/</guid>
      <description>&lt;p&gt;In Magento, if you want to get shopping cart totals details anywhere across the site, you can do so by following piece of code:&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$totalItemsInCart&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;helper&lt;/span&gt;(‘checkout&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;cart’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getItemsCount&lt;/span&gt;(); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//total items in cart  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSingleton&lt;/span&gt;(‘checkout&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;session’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getQuote&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getTotals&lt;/span&gt;(); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Total object  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$subtotal&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; round(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[“subtotal”]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Subtotal value  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$grandtotal&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; round(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[“grand_total”]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Grandtotal value  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(isset(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘discount’]) &lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp;&lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp; &lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘discount’]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$discount&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; round(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘discount’]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Discount value if applied  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;} &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;else&lt;/span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$discount&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; ”;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(isset(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘tax’]) &lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp;&lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp; &lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘tax’]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$tax&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; round(&lt;span style=&#34;color:#b8860b&#34;&gt;$totals&lt;/span&gt;[‘tax’]&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getValue&lt;/span&gt;()); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Tax value if present  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;} &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;else&lt;/span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$tax&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; ”;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>In Magento, if you want to get shopping cart totals details anywhere across the site, you can do so by following piece of code:</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$totalItemsInCart</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">helper</span>(‘checkout<span style="color:#666">/</span>cart’)<span style="color:#666">-&gt;</span><span style="color:#b44">getItemsCount</span>(); <span style="color:#080;font-style:italic">//total items in cart  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$totals</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getQuote</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getTotals</span>(); <span style="color:#080;font-style:italic">//Total object  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$subtotal</span> <span style="color:#666">=</span> round(<span style="color:#b8860b">$totals</span>[“subtotal”]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()); <span style="color:#080;font-style:italic">//Subtotal value  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$grandtotal</span> <span style="color:#666">=</span> round(<span style="color:#b8860b">$totals</span>[“grand_total”]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()); <span style="color:#080;font-style:italic">//Grandtotal value  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">if</span>(isset(<span style="color:#b8860b">$totals</span>[‘discount’]) <span style="color:#666">&amp;</span>amp;<span style="color:#666">&amp;</span>amp; <span style="color:#b8860b">$totals</span>[‘discount’]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$discount</span> <span style="color:#666">=</span> round(<span style="color:#b8860b">$totals</span>[‘discount’]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()); <span style="color:#080;font-style:italic">//Discount value if applied  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>} <span style="color:#a2f;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$discount</span> <span style="color:#666">=</span> ”;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(isset(<span style="color:#b8860b">$totals</span>[‘tax’]) <span style="color:#666">&amp;</span>amp;<span style="color:#666">&amp;</span>amp; <span style="color:#b8860b">$totals</span>[‘tax’]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$tax</span> <span style="color:#666">=</span> round(<span style="color:#b8860b">$totals</span>[‘tax’]<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>()); <span style="color:#080;font-style:italic">//Tax value if present  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>} <span style="color:#a2f;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$tax</span> <span style="color:#666">=</span> ”;  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
]]></content:encoded>
    </item>
  </channel>
</rss>

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Order on KALPESH MEHTA</title>
    <link>http://localhost:1313/blog/order/</link>
    <description>Recent content in Order on KALPESH MEHTA</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <managingEditor>k@lpe.sh (Kalpesh Mehta)</managingEditor>
    <webMaster>k@lpe.sh (Kalpesh Mehta)</webMaster>
    <copyright>Copyright © 2025 kalpesh mehta</copyright>
    <lastBuildDate>Sun, 11 Aug 2013 19:38:44 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/blog/order/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Magento how to remove order</title>
      <link>http://localhost:1313/magento-how-to-remove-order/</link>
      <pubDate>Sun, 11 Aug 2013 19:38:44 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-how-to-remove-order/</guid>
      <description>&lt;p&gt;First of all, removing live orders is not recommended. But if you are sure you want to remove orders (test orders?) then you can do so by custom script below. Get the order increment id(s) of the order you wish to delete from Magento. Remember, once order is deleted you can’t get any related information of that order.&lt;/p&gt;&#xA;&lt;p&gt;Create a test PHP file in your Magento project root with below code:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;require&lt;/span&gt; ‘app&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;Mage&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;php’;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;app&lt;/span&gt;(‘admin’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;setUseSessionInUrl&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;false&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$orderIncrementIDs&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘100000001′,’100000002’); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//your order increment ids to delete, beware!  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$rmvd&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;foreach&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$orderIncrementIDs&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$ordID&lt;/span&gt;){  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;try&lt;/span&gt;{  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByIncrementId&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$ordID&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;delete&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$rmvd&lt;/span&gt;[] &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$ordID&lt;/span&gt;;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; } &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;catch&lt;/span&gt;(Exception &lt;span style=&#34;color:#b8860b&#34;&gt;$e&lt;/span&gt;){  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Error&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$e&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getMessage&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;’  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; “Following Orders Removed&lt;span style=&#34;color:#666&#34;&gt;!&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;” &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; implode(“, “,&lt;span style=&#34;color:#b8860b&#34;&gt;$rmvd&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br&gt;&#xA;and run the file to delete the order(s).&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>First of all, removing live orders is not recommended. But if you are sure you want to remove orders (test orders?) then you can do so by custom script below. Get the order increment id(s) of the order you wish to delete from Magento. Remember, once order is deleted you can’t get any related information of that order.</p>
<p>Create a test PHP file in your Magento project root with below code:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">require</span> ‘app<span style="color:#666">/</span>Mage<span style="color:#666">.</span>php’;  
</span></span><span style="display:flex;"><span>Mage<span style="color:#666">::</span><span style="color:#b44">app</span>(‘admin’)<span style="color:#666">-&gt;</span><span style="color:#b44">setUseSessionInUrl</span>(<span style="color:#a2f;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$orderIncrementIDs</span> <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">array</span>(‘100000001′,’100000002’); <span style="color:#080;font-style:italic">//your order increment ids to delete, beware!  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$rmvd</span> <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">array</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">foreach</span>(<span style="color:#b8860b">$orderIncrementIDs</span> <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$ordID</span>){  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">try</span>{  
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">loadByIncrementId</span>(<span style="color:#b8860b">$ordID</span>)<span style="color:#666">-&gt;</span><span style="color:#b44">delete</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$rmvd</span>[] <span style="color:#666">=</span> <span style="color:#b8860b">$ordID</span>;  
</span></span><span style="display:flex;"><span> } <span style="color:#a2f;font-weight:bold">catch</span>(Exception <span style="color:#b8860b">$e</span>){  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Error<span style="color:#666">:</span> ‘<span style="color:#666">.</span><span style="color:#b8860b">$e</span><span style="color:#666">-&gt;</span><span style="color:#b44">getMessage</span>()<span style="color:#666">.</span>’  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">echo</span> “Following Orders Removed<span style="color:#666">!</span>  
</span></span><span style="display:flex;"><span>” <span style="color:#666">.</span> implode(“, “,<span style="color:#b8860b">$rmvd</span>);</span></span></code></pre></div><br>
and run the file to delete the order(s).</p>
<p>You can also delete orders directly from database using below query:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mariadb" data-lang="mariadb"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#666">@</span>order_id:<span style="color:#666">=</span>entity_id<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">from</span><span style="color:#bbb"> </span>sales_order_entity<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">where</span><span style="color:#bbb"> </span>increment_id<span style="color:#666">=</span><span style="">’</span><span style="color:#666">100000001</span><span style="">′</span>;<span style="color:#bbb">  
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">delete</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">from</span><span style="color:#bbb"> </span>sales_order_entity<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">where</span><span style="color:#bbb"> </span>entity_id<span style="color:#666">=@</span>order_id<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">or</span><span style="color:#bbb"> </span>parent_id<span style="color:#666">=@</span>order_id;</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento add attribute to order</title>
      <link>http://localhost:1313/magento-add-attribute-to-order/</link>
      <pubDate>Fri, 10 May 2013 21:46:48 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-add-attribute-to-order/</guid>
      <description>&lt;p&gt;Adding custom attribute to order in Magento is same as we do for customer and category. The difference is we will use different setup class AND we will not need attribute set, group and attribute input type now. We will create a quick module which will do exactly what we want and nothing more than that. So let’s start our new module.&lt;/p&gt;&#xA;&lt;p&gt;1.) Create a file at app/etc/modules/ and name it whatever you want. I will name it Namespace_Module.xml&lt;br&gt;&#xA;Paste this code in that file:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080&#34;&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34;??&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;config&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;namespace_module&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;active&amp;gt;&lt;/span&gt;true&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/active&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;codepool&amp;gt;&lt;/span&gt;local&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/codepool&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/namespace_module&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/config&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Adding custom attribute to order in Magento is same as we do for customer and category. The difference is we will use different setup class AND we will not need attribute set, group and attribute input type now. We will create a quick module which will do exactly what we want and nothing more than that. So let’s start our new module.</p>
<p>1.) Create a file at app/etc/modules/ and name it whatever you want. I will name it Namespace_Module.xml<br>
Paste this code in that file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#080">&lt;?xml version=&#34;1.0&#34;??&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;config&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;modules&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;namespace_module&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;active&gt;</span>true<span style="color:#008000;font-weight:bold">&lt;/active&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;codepool&gt;</span>local<span style="color:#008000;font-weight:bold">&lt;/codepool&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/namespace_module&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/modules&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/config&gt;</span></span></span></code></pre></div></p>
<p>2.) Create necessary directories to reach to app/code/local/Namespace/Module/etc/, so that we can create our config.xml there. Paste below code in this config file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#080">&lt;?xml version=&#34;1.0&#34;??&gt;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;config&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;modules&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;namespace_module&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;version&gt;</span>0.0.1<span style="color:#008000;font-weight:bold">&lt;/version&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/namespace_module&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/modules&gt;&lt;/config&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;global&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;resources&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;modulename_setup&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;setup&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;module&gt;</span>Namespace_Module<span style="color:#008000;font-weight:bold">&lt;/module&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;class&gt;</span>Mage_Sales_Model_Mysql4_Setup<span style="color:#008000;font-weight:bold">&lt;/class&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/setup&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;use&gt;</span>core_setup<span style="color:#008000;font-weight:bold">&lt;/use&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/modulename_setup&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;modulename_write&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;use&gt;</span>core_write<span style="color:#008000;font-weight:bold">&lt;/use&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/modulename_write&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;modulename_read&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;use&gt;</span>core_read<span style="color:#008000;font-weight:bold">&lt;/use&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/connection&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/modulename_read&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/resources&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/global&gt;</span>  </span></span></code></pre></div></p>
<p>3.) Now comes our main file, which will create new Order attribute for us. Create file “mysql4-install-0.0.1.php” in app/code/local/Namespace/Module/sql/module_setup/, and paste the below code in it:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#666">&lt;?</span>php <span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#b44">startSetup</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">addAttribute</span>(‘order’, ‘your_custom_attribute_here’, <span style="color:#a2f;font-weight:bold">array</span>(  
</span></span><span style="display:flex;"><span> ‘type’ <span style="color:#666">=&gt;</span> ‘varchar’,  
</span></span><span style="display:flex;"><span> ‘label’ <span style="color:#666">=&gt;</span> ‘Custom Order attribute label’,  
</span></span><span style="display:flex;"><span> ‘visible’ <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">true</span>,  
</span></span><span style="display:flex;"><span> ‘required’ <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">false</span>,  
</span></span><span style="display:flex;"><span> ‘visible_on_front’ <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">true</span>,  
</span></span><span style="display:flex;"><span> ‘user_defined’ <span style="color:#666">=&gt;</span> <span style="color:#a2f;font-weight:bold">true</span>  
</span></span><span style="display:flex;"><span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">endSetup</span>();</span></span></code></pre></div></p>
<p>This will add new attribute to Order and after clearing cache you can see your custom attribute in backend “Manage Orders” screen and in customer frontend screen “My Orders”. HTH!</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento get all invoices and shipments of an order</title>
      <link>http://localhost:1313/magento-get-all-invoices-and-shipments-of-an-order/</link>
      <pubDate>Sun, 28 Apr 2013 19:37:49 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-get-all-invoices-and-shipments-of-an-order/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Getting all the invoices of an order:&lt;/strong&gt;&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$orderID&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;hasInvoices&lt;/span&gt;()) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$invIncrementIDs&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;foreach&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getInvoiceCollection&lt;/span&gt;() &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$inv&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$invIncrementIDs&lt;/span&gt;[] &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$inv&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getIncrementId&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//other invoice details…  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt; } Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$invIncrementIDs&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Getting all the shipments of an order:&lt;/strong&gt;&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$orderID&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;foreach&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getShipmentsCollection&lt;/span&gt;() &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$shipment&lt;/span&gt;)  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$shipment&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;()); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//get each shipment data here…  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p><strong>Getting all the invoices of an order:</strong><br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$orderID</span>);  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">hasInvoices</span>()) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$invIncrementIDs</span> <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">array</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">foreach</span> (<span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getInvoiceCollection</span>() <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$inv</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$invIncrementIDs</span>[] <span style="color:#666">=</span> <span style="color:#b8860b">$inv</span><span style="color:#666">-&gt;</span><span style="color:#b44">getIncrementId</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#080;font-style:italic">//other invoice details…  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> } Mage<span style="color:#666">::</span><span style="color:#b44">log</span>(<span style="color:#b8860b">$invIncrementIDs</span>);  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></p>
<p><strong>Getting all the shipments of an order:</strong><br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$orderID</span>);  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">foreach</span>(<span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getShipmentsCollection</span>() <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$shipment</span>)  
</span></span><span style="display:flex;"><span>{  
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">log</span>(<span style="color:#b8860b">$shipment</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>()); <span style="color:#080;font-style:italic">//get each shipment data here…  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento join EAV collection with Flat table</title>
      <link>http://localhost:1313/magento-join-eav-collection-with-flat-table/</link>
      <pubDate>Sun, 28 Apr 2013 15:26:29 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-join-eav-collection-with-flat-table/</guid>
      <description>&lt;p&gt;Joining tables in Magento when it comes to EAV with Flat table is quite complicated. Consider you want to join sales_flat_order table with customer EAV tables to get Customer’s firstname and lastname, it becomes difficult as customer’s name comes from customer_entity_varchar table.&lt;/p&gt;&#xA;&lt;p&gt;Below code will join sales order flat table with customer EAV to get customer’s full name in the collection along with all the order details.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCollection&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$fn&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘eav&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;entity_attribute’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByCode&lt;/span&gt;(‘1’, ‘firstname’);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$ln&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘eav&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;entity_attribute’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByCode&lt;/span&gt;(‘1’, ‘lastname’);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSelect&lt;/span&gt;()  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;join&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘ce1’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘customer_entity_varchar’), ‘ce1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;entity_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;main_table&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;customer_id’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘firstname’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘value’))  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;where&lt;/span&gt;(‘ce1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;attribute_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;’&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$fn&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getAttributeId&lt;/span&gt;())  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;join&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘ce2’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘customer_entity_varchar’), ‘ce2&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;entity_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;main_table&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;customer_id’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘lastname’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘value’))  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;where&lt;/span&gt;(‘ce2&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;attribute_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;’&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$ln&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getAttributeId&lt;/span&gt;())  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;columns&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;new&lt;/span&gt; Zend_Db_Expr(“CONCAT(&lt;span style=&#34;color:#b44&#34;&gt;`ce1`&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;`value`&lt;/span&gt;, ‘ ‘,&lt;span style=&#34;color:#b44&#34;&gt;`ce2`&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;`value`&lt;/span&gt;) &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;AS&lt;/span&gt; fullname”));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print_r(&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>Joining tables in Magento when it comes to EAV with Flat table is quite complicated. Consider you want to join sales_flat_order table with customer EAV tables to get Customer’s firstname and lastname, it becomes difficult as customer’s name comes from customer_entity_varchar table.</p>
<p>Below code will join sales order flat table with customer EAV to get customer’s full name in the collection along with all the order details.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$coll</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCollection</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$fn</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘eav<span style="color:#666">/</span>entity_attribute’)<span style="color:#666">-&gt;</span><span style="color:#b44">loadByCode</span>(‘1’, ‘firstname’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$ln</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘eav<span style="color:#666">/</span>entity_attribute’)<span style="color:#666">-&gt;</span><span style="color:#b44">loadByCode</span>(‘1’, ‘lastname’);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$coll</span><span style="color:#666">-&gt;</span><span style="color:#b44">getSelect</span>()  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">join</span>(<span style="color:#a2f;font-weight:bold">array</span>(‘ce1’ <span style="color:#666">=&gt;</span> ‘customer_entity_varchar’), ‘ce1<span style="color:#666">.</span>entity_id<span style="color:#666">=</span>main_table<span style="color:#666">.</span>customer_id’, <span style="color:#a2f;font-weight:bold">array</span>(‘firstname’ <span style="color:#666">=&gt;</span> ‘value’))  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">where</span>(‘ce1<span style="color:#666">.</span>attribute_id<span style="color:#666">=</span>’<span style="color:#666">.</span><span style="color:#b8860b">$fn</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributeId</span>())  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">join</span>(<span style="color:#a2f;font-weight:bold">array</span>(‘ce2’ <span style="color:#666">=&gt;</span> ‘customer_entity_varchar’), ‘ce2<span style="color:#666">.</span>entity_id<span style="color:#666">=</span>main_table<span style="color:#666">.</span>customer_id’, <span style="color:#a2f;font-weight:bold">array</span>(‘lastname’ <span style="color:#666">=&gt;</span> ‘value’))  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">where</span>(‘ce2<span style="color:#666">.</span>attribute_id<span style="color:#666">=</span>’<span style="color:#666">.</span><span style="color:#b8860b">$ln</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributeId</span>())  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">columns</span>(<span style="color:#a2f;font-weight:bold">new</span> Zend_Db_Expr(“CONCAT(<span style="color:#b44">`ce1`</span><span style="color:#666">.</span><span style="color:#b44">`value`</span>, ‘ ‘,<span style="color:#b44">`ce2`</span><span style="color:#666">.</span><span style="color:#b44">`value`</span>) <span style="color:#a2f;font-weight:bold">AS</span> fullname”));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print_r(<span style="color:#b8860b">$coll</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>());</span></span></code></pre></div>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Add additional product/item attributes in order and invoice emails</title>
      <link>http://localhost:1313/magento-add-additional-product/item-attributes-in-order-and-invoice-emails/</link>
      <pubDate>Thu, 24 Jan 2013 16:29:24 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-add-additional-product/item-attributes-in-order-and-invoice-emails/</guid>
      <description>&lt;p&gt;Recently I was working with a German client, who wanted to show additional product attribute options in the order and invoice emails due to stricter law for e-commerce in their country. Magento provides basic information in the default email templates, but each store has their unique requirement to show additional information.&lt;/p&gt;&#xA;&lt;p&gt;I will show you how to add extra product attribute values, along with order item options and custom options in order emails and invoice emails.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Recently I was working with a German client, who wanted to show additional product attribute options in the order and invoice emails due to stricter law for e-commerce in their country. Magento provides basic information in the default email templates, but each store has their unique requirement to show additional information.</p>
<p>I will show you how to add extra product attribute values, along with order item options and custom options in order emails and invoice emails.</p>
<p>Here is the code that should work for order and invoice emails to get additional PRODUCT ATTRIBUTES displayed:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$productId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_item</span><span style="color:#666">-&gt;</span><span style="color:#b44">getProduct</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>(); <span style="color:#080;font-style:italic">//for order emails  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">//$productId = $_item-&gt;getProductId(); //for invoice emails  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$product</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘catalog<span style="color:#666">/</span>product’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$productId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$attributes</span> <span style="color:#666">=</span> <span style="color:#b8860b">$product</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributes</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">//Get a list of all PRODUCT ATTRIBUTES you want to show in this array…  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$dispAttribs</span> <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">array</span>(‘hardrive’, ‘memory’, ‘processor’);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">foreach</span> (<span style="color:#b8860b">$attributes</span> <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$attribute</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$attributeCode</span> <span style="color:#666">=</span> <span style="color:#b8860b">$attribute</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributeCode</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>in_array(<span style="color:#b8860b">$attributeCode</span>, <span style="color:#b8860b">$dispAttribs</span>)) <span style="color:#a2f;font-weight:bold">continue</span>;  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$label</span> <span style="color:#666">=</span> <span style="color:#b8860b">$attribute</span><span style="color:#666">-&gt;</span><span style="color:#b44">getFrontend</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getLabel</span>(<span style="color:#b8860b">$product</span>);  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$value</span> <span style="color:#666">=</span> <span style="color:#b8860b">$attribute</span><span style="color:#666">-&gt;</span><span style="color:#b44">getFrontend</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getValue</span>(<span style="color:#b8860b">$product</span>);  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> “  
</span></span><span style="display:flex;"><span><span style="color:#666">**</span>” <span style="color:#666">.</span> <span style="color:#b8860b">$label</span> <span style="color:#666">.</span> “<span style="color:#666">:**</span> ” <span style="color:#666">.</span> <span style="color:#b8860b">$value</span>;  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></p>
<p>For displaying CUSTOM OPTIONS and/or ITEM OPTIONS from the item, use this:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">foreach</span>(<span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">getItemOptions</span>() <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$opt</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span>(isset(<span style="color:#b8860b">$opt</span>[‘option_id’])) { <span style="color:#080;font-style:italic">//for CUSTOM OPTIONS  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> <span style="color:#a2f;font-weight:bold">echo</span> “<span style="color:#666">**</span>” <span style="color:#666">.</span> <span style="color:#b8860b">$opt</span>[‘label’] <span style="color:#666">.</span> “<span style="color:#666">:**</span> “<span style="color:#666">.</span> <span style="color:#b8860b">$opt</span>[‘option_value’] <span style="color:#666">.</span> “  
</span></span><span style="display:flex;"><span>“;  
</span></span><span style="display:flex;"><span> } <span style="color:#a2f;font-weight:bold">else</span> { <span style="color:#080;font-style:italic">//for ITEM OPTIONS  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> <span style="color:#a2f;font-weight:bold">echo</span> “<span style="color:#666">**</span>” <span style="color:#666">.</span> <span style="color:#b8860b">$opt</span>[‘label’] <span style="color:#666">.</span> “<span style="color:#666">:**</span> “<span style="color:#666">.</span> <span style="color:#b8860b">$opt</span>[‘value’] <span style="color:#666">.</span> “  
</span></span><span style="display:flex;"><span>“;  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></p>
<p>For adding code to ORDER emails, the file where the code should go is:<br>
app/design/frontend/base/default/template/email/order/items/order/default.phtml</p>
<p>For adding code to INVOICE emails, the file where the code should go is:<br>
app/design/frontend/base/default/template/email/order/items/invoice/default.phtml</p>
<p>Instead of base/default, you can put it in your custom theme location which is obvious.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Difference between order states and statuses</title>
      <link>http://localhost:1313/magento-difference-between-order-states-and-statuses/</link>
      <pubDate>Sat, 21 Apr 2012 16:47:38 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-difference-between-order-states-and-statuses/</guid>
      <description>&lt;p&gt;If you are building website in Magento, you may have noticed that there are two columns in &lt;em&gt;sales_flat_order&lt;/em&gt; table which are confusing. These are &lt;strong&gt;state&lt;/strong&gt; and &lt;strong&gt;status&lt;/strong&gt;. You might think what is the difference between these two, both having same meaning.&lt;/p&gt;&#xA;&lt;p&gt;Well, this is not the case. They both are different. State is used by magento to tell if the order is new, processing, complete, holded, closed, canceled, etc.; while Statuses are the one that YOU would be defining at the backend in System -&amp;gt; Order Statuses. Magento displays order STATUSES and not STATES in the backend order detail page to let you know which status is assigned as per your mapping. Remember, multiple statuses can be mapped with one state, while vice versa is not possible.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If you are building website in Magento, you may have noticed that there are two columns in <em>sales_flat_order</em> table which are confusing. These are <strong>state</strong> and <strong>status</strong>. You might think what is the difference between these two, both having same meaning.</p>
<p>Well, this is not the case. They both are different. State is used by magento to tell if the order is new, processing, complete, holded, closed, canceled, etc.; while Statuses are the one that YOU would be defining at the backend in System -&gt; Order Statuses. Magento displays order STATUSES and not STATES in the backend order detail page to let you know which status is assigned as per your mapping. Remember, multiple statuses can be mapped with one state, while vice versa is not possible.</p>
<p>Consider an example, your customer places an order as Cash on Delivery, you will need something like COD_Pending as the order status so that you know it is not yet paid. Magento will have state <em>new</em> for this, which makes you unpredictable of what kind of transaction is this, COD or Prepaid. The STATUS can be anything, as you define, for your understanding; while STATE is something which Magento needs to understand, internally.</p>
<p>In short, Magento uses order state internally for processing order, whereas order status are used by store owners to understand the exact order flow where one state can be assigned to multiple statuses.</p>
<p>To understand this in detail, have a look at <a href="http://www.magentocommerce.com/wiki/2_-_magento_concepts_and_architecture/order_management">this</a><br>
Hope it helps!</p>
]]></content:encoded>
    </item>
  </channel>
</rss>

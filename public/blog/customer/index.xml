<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Customer on KALPESH MEHTA</title>
    <link>http://localhost:1313/blog/customer/</link>
    <description>Recent content in Customer on KALPESH MEHTA</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <managingEditor>k@lpe.sh (Kalpesh Mehta)</managingEditor>
    <webMaster>k@lpe.sh (Kalpesh Mehta)</webMaster>
    <copyright>Copyright © 2025 kalpesh mehta</copyright>
    <lastBuildDate>Thu, 21 Aug 2014 21:07:38 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/blog/customer/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Magento event to check if customer have subscribed to newsletter</title>
      <link>http://localhost:1313/magento-event-to-check-if-customer-have-subscribed-to-newsletter/</link>
      <pubDate>Thu, 21 Aug 2014 21:07:38 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-event-to-check-if-customer-have-subscribed-to-newsletter/</guid>
      <description>&lt;p&gt;Check if the customer has subscribed to the newsletter from registration page or checkout page by using event observer. You may need to take some action programatically if customer subscribes to newsletter, below code will help you exactly in that.&lt;/p&gt;&#xA;&lt;p&gt;Code to put in your config.xml&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;newsletter_subscriber_save_after&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;namespace_module_model_observer&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;class&amp;gt;&lt;/span&gt;Namespace_Module_Model_Observer&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/class&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;method&amp;gt;&lt;/span&gt;subscribedToNewsletter&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/method&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/namespace_module_model_observer&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/newsletter_subscriber_save_after&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&#xA;&lt;p&gt;Code to put in your Observer.php file&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;Namespace_Module_Model_Observer&lt;/span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;subscribedToNewsletter&lt;/span&gt;(Varien_Event_Observer &lt;span style=&#34;color:#b8860b&#34;&gt;$observer&lt;/span&gt;)  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$event&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$observer&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getEvent&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$subscriber&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$event&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getDataObject&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$data&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$subscriber&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$email&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$data&lt;/span&gt;[‘subscriber_email’];&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$statusChange&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$subscriber&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getIsStatusChanged&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$data&lt;/span&gt;[‘subscriber_status’] &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; “1” &lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp;&lt;span style=&#34;color:#666&#34;&gt;&amp;amp;&lt;/span&gt;amp; &lt;span style=&#34;color:#b8860b&#34;&gt;$statusChange&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//code to handle if customer is just subscribed…  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Check if the customer has subscribed to the newsletter from registration page or checkout page by using event observer. You may need to take some action programatically if customer subscribes to newsletter, below code will help you exactly in that.</p>
<p>Code to put in your config.xml<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;newsletter_subscriber_save_after&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;observers&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;namespace_module_model_observer&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;class&gt;</span>Namespace_Module_Model_Observer<span style="color:#008000;font-weight:bold">&lt;/class&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;method&gt;</span>subscribedToNewsletter<span style="color:#008000;font-weight:bold">&lt;/method&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/namespace_module_model_observer&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/observers&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/newsletter_subscriber_save_after&gt;</span>  </span></span></code></pre></div></p>
<p>Code to put in your Observer.php file<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Namespace_Module_Model_Observer</span> {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">function</span> <span style="color:#00a000">subscribedToNewsletter</span>(Varien_Event_Observer <span style="color:#b8860b">$observer</span>)  
</span></span><span style="display:flex;"><span> {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$event</span> <span style="color:#666">=</span> <span style="color:#b8860b">$observer</span><span style="color:#666">-&gt;</span><span style="color:#b44">getEvent</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$subscriber</span> <span style="color:#666">=</span> <span style="color:#b8860b">$event</span><span style="color:#666">-&gt;</span><span style="color:#b44">getDataObject</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$data</span> <span style="color:#666">=</span> <span style="color:#b8860b">$subscriber</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$email</span> <span style="color:#666">=</span> <span style="color:#b8860b">$data</span>[‘subscriber_email’];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$statusChange</span> <span style="color:#666">=</span> <span style="color:#b8860b">$subscriber</span><span style="color:#666">-&gt;</span><span style="color:#b44">getIsStatusChanged</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#b8860b">$data</span>[‘subscriber_status’] <span style="color:#666">==</span> “1” <span style="color:#666">&amp;</span>amp;<span style="color:#666">&amp;</span>amp; <span style="color:#b8860b">$statusChange</span> <span style="color:#666">==</span> <span style="color:#a2f;font-weight:bold">true</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#080;font-style:italic">//code to handle if customer is just subscribed…  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> }  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span>}  
</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento event observer for customer registration success</title>
      <link>http://localhost:1313/magento-event-observer-for-customer-registration-success/</link>
      <pubDate>Thu, 21 Aug 2014 21:00:10 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-event-observer-for-customer-registration-success/</guid>
      <description>&lt;p&gt;If you are looking for how to execute some code when customer successfully sign up in your website, you can use below code to check if the registration was successful. Note, this will NOT check if customer was registered from checkout page, if you are looking for that please go to this &lt;a href=&#34;http://ka.lpe.sh/2014/08/21/magento-check-customer-registered-checkout-page/&#34;&gt;post&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;In your xml file:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;events&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;customer_register_success&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;namespace_module_customer_register_success&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;singleton&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;class&amp;gt;&lt;/span&gt;Namespace_Module_Model_Observer&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/class&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;method&amp;gt;&lt;/span&gt;customerRegisterSuccess&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/method&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/namespace_module_customer_register_success&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/customer_register_success&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/events&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;&#xA;&lt;p&gt;And in your Observer.php file:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#00f&#34;&gt;Namespace_Module_Model_Observer&lt;/span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#00a000&#34;&gt;customerRegisterSuccess&lt;/span&gt;(Varien_Event_Observer &lt;span style=&#34;color:#b8860b&#34;&gt;$observer&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$event&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$observer&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getEvent&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$customer&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$event&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCustomer&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$email&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$customer&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getEmail&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$email&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//code to handle if customer is successfully registered  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If you are looking for how to execute some code when customer successfully sign up in your website, you can use below code to check if the registration was successful. Note, this will NOT check if customer was registered from checkout page, if you are looking for that please go to this <a href="http://ka.lpe.sh/2014/08/21/magento-check-customer-registered-checkout-page/">post</a>.</p>
<p>In your xml file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;events&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;customer_register_success&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;observers&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;namespace_module_customer_register_success&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;type&gt;</span>singleton<span style="color:#008000;font-weight:bold">&lt;/type&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;class&gt;</span>Namespace_Module_Model_Observer<span style="color:#008000;font-weight:bold">&lt;/class&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;method&gt;</span>customerRegisterSuccess<span style="color:#008000;font-weight:bold">&lt;/method&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/namespace_module_customer_register_success&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/observers&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/customer_register_success&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/events&gt;</span>  </span></span></code></pre></div></p>
<p>And in your Observer.php file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Namespace_Module_Model_Observer</span> {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">function</span> <span style="color:#00a000">customerRegisterSuccess</span>(Varien_Event_Observer <span style="color:#b8860b">$observer</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$event</span> <span style="color:#666">=</span> <span style="color:#b8860b">$observer</span><span style="color:#666">-&gt;</span><span style="color:#b44">getEvent</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$customer</span> <span style="color:#666">=</span> <span style="color:#b8860b">$event</span><span style="color:#666">-&gt;</span><span style="color:#b44">getCustomer</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$email</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customer</span><span style="color:#666">-&gt;</span><span style="color:#b44">getEmail</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#b8860b">$email</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#080;font-style:italic">//code to handle if customer is successfully registered  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> }  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span>}  
</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento check if customer registered in checkout page</title>
      <link>http://localhost:1313/magento-check-if-customer-registered-in-checkout-page/</link>
      <pubDate>Thu, 21 Aug 2014 20:49:54 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-check-if-customer-registered-in-checkout-page/</guid>
      <description>&lt;p&gt;If you want to check if the customer is guest, registered or just register to the site when they place the order, below script will help you identify that in success.phtml file.&lt;/p&gt;&#xA;&lt;p&gt;You can find success / order confirmation phtml file at:&lt;br&gt;&#xA;app/design/frontend/[package]/[theme]/template/checkout/success.phtml&lt;/p&gt;&#xA;&lt;p&gt;Just at the end of this file put below lines of code:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#666&#34;&gt;&amp;lt;?&lt;/span&gt;php &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;sales/order&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByIncrementId&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$this&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getOrderId&lt;/span&gt;());  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$quoteId&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getQuoteId&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;quote’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$quoteId&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$method&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$quote&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCheckoutMethod&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;true&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$customer_email&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$order&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCustomerEmail&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#b8860b&#34;&gt;$method&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; ‘register’){ &lt;span style=&#34;color:#080&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle if customer just registered to your site  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } elseif($method == &amp;#39;guest&amp;#39;) {??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle if customer is guest  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } else { ??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;//code to handle for logged in customer  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;&amp;lt;?php } ??&amp;gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;&#34;&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If you want to check if the customer is guest, registered or just register to the site when they place the order, below script will help you identify that in success.phtml file.</p>
<p>You can find success / order confirmation phtml file at:<br>
app/design/frontend/[package]/[theme]/template/checkout/success.phtml</p>
<p>Just at the end of this file put below lines of code:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#666">&lt;?</span>php <span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(<span style="color:#b44">&#39;sales/order&#39;</span>)<span style="color:#666">-&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#b44">loadByIncrementId</span>(<span style="color:#b8860b">$this</span><span style="color:#666">-&gt;</span><span style="color:#b44">getOrderId</span>());  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$quoteId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getQuoteId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$quote</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>quote’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$quoteId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$method</span> <span style="color:#666">=</span> <span style="color:#b8860b">$quote</span><span style="color:#666">-&gt;</span><span style="color:#b44">getCheckoutMethod</span>(<span style="color:#a2f;font-weight:bold">true</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customer_email</span> <span style="color:#666">=</span> <span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getCustomerEmail</span>();  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#b8860b">$method</span> <span style="color:#666">==</span> ‘register’){ <span style="color:#080">?&gt;</span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle if customer just registered to your site  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } elseif($method == &#39;guest&#39;) {??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle if customer is guest  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } else { ??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span><span style="display:flex;"><span><span style="">//code to handle for logged in customer  
</span></span></span><span style="display:flex;"><span><span style="">&lt;?php } ??&gt;
</span></span></span><span style="display:flex;"><span><span style="">  
</span></span></span></code></pre></div></p>
<p>In the same file, success.phtml, you can request for order number, customer email, customer id, subtotal, grandtotal, order ID just created etc. like this:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_customerId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘customer<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCustomerId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$lastOrderId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getLastOrderId</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$order</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘sales<span style="color:#666">/</span>order’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$lastOrderId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_totalData</span> <span style="color:#666">=</span><span style="color:#b8860b">$order</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_sub</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘subtotal’];  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_orderEmail</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘customer_email’];  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$_orderNumber</span> <span style="color:#666">=</span> <span style="color:#b8860b">$_totalData</span>[‘increment_id’];  
</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento add attribute to customer</title>
      <link>http://localhost:1313/magento-add-attribute-to-customer/</link>
      <pubDate>Fri, 10 May 2013 20:52:55 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-add-attribute-to-customer/</guid>
      <description>&lt;p&gt;In Magento to add an attribute to customer is not an option in the admin panel like it does have for Product attribute. So you have to end up writing the script that will add your custom attribute in customer’s EAV tables.&lt;/p&gt;&#xA;&lt;p&gt;Below code will insert your custom customer attribute in Magento system. You can even specify whil creating the attribute whether that attribute should appear in the forms (like register/signup) or not.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>In Magento to add an attribute to customer is not an option in the admin panel like it does have for Product attribute. So you have to end up writing the script that will add your custom attribute in customer’s EAV tables.</p>
<p>Below code will insert your custom customer attribute in Magento system. You can even specify whil creating the attribute whether that attribute should appear in the forms (like register/signup) or not.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$installer</span> <span style="color:#666">=</span> <span style="color:#b8860b">$this</span>;  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$installer</span><span style="color:#666">-&gt;</span><span style="color:#b44">startSetup</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$setup</span> <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> Mage_Eav_Model_Entity_Setup(‘core_setup’);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$entityTypeId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">getEntityTypeId</span>(‘customer’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$attributeSetId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">getDefaultAttributeSetId</span>(<span style="color:#b8860b">$entityTypeId</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$attributeGroupId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">getDefaultAttributeGroupId</span>(<span style="color:#b8860b">$entityTypeId</span>, <span style="color:#b8860b">$attributeSetId</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">addAttribute</span>(‘customer’, ‘your_attribute_code_here’, <span style="color:#a2f;font-weight:bold">array</span>(  
</span></span><span style="display:flex;"><span> ‘input’ <span style="color:#666">=&gt;</span> ‘text’, <span style="color:#080;font-style:italic">//or select or whatever you like  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> ‘type’ <span style="color:#666">=&gt;</span> ‘int’, <span style="color:#080;font-style:italic">//or varchar or anything you want it  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> ‘label’ <span style="color:#666">=&gt;</span> ‘Attribute description goes here’,  
</span></span><span style="display:flex;"><span> ‘visible’ <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>,  
</span></span><span style="display:flex;"><span> ‘required’ <span style="color:#666">=&gt;</span> <span style="color:#666">0</span>, <span style="color:#080;font-style:italic">//mandatory? then 1  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> ‘user_defined’ <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>,  
</span></span><span style="display:flex;"><span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">addAttributeToGroup</span>(  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$entityTypeId</span>,  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$attributeSetId</span>,  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$attributeGroupId</span>,  
</span></span><span style="display:flex;"><span> ‘your_attribute_code_here’,  
</span></span><span style="display:flex;"><span> ‘100’  
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$oAttribute</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘eav<span style="color:#666">/</span>config’)<span style="color:#666">-&gt;</span><span style="color:#b44">getAttribute</span>(‘customer’, ‘your_attribute_code_here’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$oAttribute</span><span style="color:#666">-&gt;</span><span style="color:#b44">setData</span>(‘used_in_forms’, <span style="color:#a2f;font-weight:bold">array</span>(‘adminhtml_customer’));  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$oAttribute</span><span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$setup</span><span style="color:#666">-&gt;</span><span style="color:#b44">endSetup</span>();</span></span></code></pre></div>
<p>Here we have used our custom attribute’s:<br>
– <em>input</em> type as <em>text</em>, but you can have it anything you like to appear in the form. It can be textarea, date, select or anything you want.<br>
– data <em>type</em> as <em>int</em>, but you can have it anything from text, datetime, varchar or decimal. Remember customer is EAV in Magento, so it needs this information to store all the future values of this attribute in customer_entity_int (customer_entity_*) table.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento join EAV collection with Flat table</title>
      <link>http://localhost:1313/magento-join-eav-collection-with-flat-table/</link>
      <pubDate>Sun, 28 Apr 2013 15:26:29 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-join-eav-collection-with-flat-table/</guid>
      <description>&lt;p&gt;Joining tables in Magento when it comes to EAV with Flat table is quite complicated. Consider you want to join sales_flat_order table with customer EAV tables to get Customer’s firstname and lastname, it becomes difficult as customer’s name comes from customer_entity_varchar table.&lt;/p&gt;&#xA;&lt;p&gt;Below code will join sales order flat table with customer EAV to get customer’s full name in the collection along with all the order details.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘sales&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;order’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCollection&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$fn&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘eav&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;entity_attribute’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByCode&lt;/span&gt;(‘1’, ‘firstname’);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$ln&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘eav&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;entity_attribute’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;loadByCode&lt;/span&gt;(‘1’, ‘lastname’);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSelect&lt;/span&gt;()  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;join&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘ce1’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘customer_entity_varchar’), ‘ce1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;entity_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;main_table&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;customer_id’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘firstname’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘value’))  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;where&lt;/span&gt;(‘ce1&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;attribute_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;’&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$fn&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getAttributeId&lt;/span&gt;())  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;join&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘ce2’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘customer_entity_varchar’), ‘ce2&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;entity_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;main_table&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;customer_id’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(‘lastname’ &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; ‘value’))  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;where&lt;/span&gt;(‘ce2&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;attribute_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;’&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$ln&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getAttributeId&lt;/span&gt;())  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;columns&lt;/span&gt;(&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;new&lt;/span&gt; Zend_Db_Expr(“CONCAT(&lt;span style=&#34;color:#b44&#34;&gt;`ce1`&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;`value`&lt;/span&gt;, ‘ ‘,&lt;span style=&#34;color:#b44&#34;&gt;`ce2`&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;`value`&lt;/span&gt;) &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;AS&lt;/span&gt; fullname”));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;print_r(&lt;span style=&#34;color:#b8860b&#34;&gt;$coll&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>Joining tables in Magento when it comes to EAV with Flat table is quite complicated. Consider you want to join sales_flat_order table with customer EAV tables to get Customer’s firstname and lastname, it becomes difficult as customer’s name comes from customer_entity_varchar table.</p>
<p>Below code will join sales order flat table with customer EAV to get customer’s full name in the collection along with all the order details.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$coll</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘sales<span style="color:#666">/</span>order’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCollection</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$fn</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘eav<span style="color:#666">/</span>entity_attribute’)<span style="color:#666">-&gt;</span><span style="color:#b44">loadByCode</span>(‘1’, ‘firstname’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$ln</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘eav<span style="color:#666">/</span>entity_attribute’)<span style="color:#666">-&gt;</span><span style="color:#b44">loadByCode</span>(‘1’, ‘lastname’);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$coll</span><span style="color:#666">-&gt;</span><span style="color:#b44">getSelect</span>()  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">join</span>(<span style="color:#a2f;font-weight:bold">array</span>(‘ce1’ <span style="color:#666">=&gt;</span> ‘customer_entity_varchar’), ‘ce1<span style="color:#666">.</span>entity_id<span style="color:#666">=</span>main_table<span style="color:#666">.</span>customer_id’, <span style="color:#a2f;font-weight:bold">array</span>(‘firstname’ <span style="color:#666">=&gt;</span> ‘value’))  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">where</span>(‘ce1<span style="color:#666">.</span>attribute_id<span style="color:#666">=</span>’<span style="color:#666">.</span><span style="color:#b8860b">$fn</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributeId</span>())  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">join</span>(<span style="color:#a2f;font-weight:bold">array</span>(‘ce2’ <span style="color:#666">=&gt;</span> ‘customer_entity_varchar’), ‘ce2<span style="color:#666">.</span>entity_id<span style="color:#666">=</span>main_table<span style="color:#666">.</span>customer_id’, <span style="color:#a2f;font-weight:bold">array</span>(‘lastname’ <span style="color:#666">=&gt;</span> ‘value’))  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">where</span>(‘ce2<span style="color:#666">.</span>attribute_id<span style="color:#666">=</span>’<span style="color:#666">.</span><span style="color:#b8860b">$ln</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAttributeId</span>())  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">columns</span>(<span style="color:#a2f;font-weight:bold">new</span> Zend_Db_Expr(“CONCAT(<span style="color:#b44">`ce1`</span><span style="color:#666">.</span><span style="color:#b44">`value`</span>, ‘ ‘,<span style="color:#b44">`ce2`</span><span style="color:#666">.</span><span style="color:#b44">`value`</span>) <span style="color:#a2f;font-weight:bold">AS</span> fullname”));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print_r(<span style="color:#b8860b">$coll</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>());</span></span></code></pre></div>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Check if any particular customer is currently logged in</title>
      <link>http://localhost:1313/magento-check-if-any-particular-customer-is-currently-logged-in/</link>
      <pubDate>Thu, 25 Apr 2013 14:08:51 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-check-if-any-particular-customer-is-currently-logged-in/</guid>
      <description>&lt;p&gt;Let’s say you want to check if any particular customer is currently logged in to your site or not. Or let’s check how many customers with their customer IDs and other activities are online on your store.&lt;/p&gt;&#xA;&lt;p&gt;This little script will help you in finding all the currently active OR any particular customer(s) active in your store.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;require&lt;/span&gt; “app&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;Mage&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;php”;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;umask(&lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;app&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$collection&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘log&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;visitor_online’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;prepare&lt;/span&gt;()&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCollection&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Get all the customers that are logged in……  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;foreach&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$collection&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;() &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$cust&lt;/span&gt;) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Customer ID&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$cust&lt;/span&gt;[‘customer_id’] &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; ‘  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Last URL visited&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$cust&lt;/span&gt;[‘last_url’] &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; ‘  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘First visit&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$cust&lt;/span&gt;[‘first_visit_at’] &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; ‘  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Last visit&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$cust&lt;/span&gt;[‘last_visit_at’] &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; ‘  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘&lt;span style=&#34;color:#666&#34;&gt;======================&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;‘;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//Get any particular customer, if he’s currently logged in or not…..  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$collection&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;addFieldToFilter&lt;/span&gt;(‘customer_id’, &lt;span style=&#34;color:#666&#34;&gt;5&lt;/span&gt;)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;addCustomerData&lt;/span&gt;(); &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//5 is customer ID of customer you want to check  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$collection&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;count&lt;/span&gt;()) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Customer is logged in’;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;else&lt;/span&gt; {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Customer is &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;NOT&lt;/span&gt; logged in’;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>Let’s say you want to check if any particular customer is currently logged in to your site or not. Or let’s check how many customers with their customer IDs and other activities are online on your store.</p>
<p>This little script will help you in finding all the currently active OR any particular customer(s) active in your store.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">require</span> “app<span style="color:#666">/</span>Mage<span style="color:#666">.</span>php”;  
</span></span><span style="display:flex;"><span>umask(<span style="color:#666">0</span>);  
</span></span><span style="display:flex;"><span>Mage<span style="color:#666">::</span><span style="color:#b44">app</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$collection</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘log<span style="color:#666">/</span>visitor_online’)<span style="color:#666">-&gt;</span><span style="color:#b44">prepare</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getCollection</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">//Get all the customers that are logged in……  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">foreach</span>(<span style="color:#b8860b">$collection</span><span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>() <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$cust</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Customer ID<span style="color:#666">:</span> ‘<span style="color:#666">.</span><span style="color:#b8860b">$cust</span>[‘customer_id’] <span style="color:#666">.</span> ‘  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Last URL visited<span style="color:#666">:</span> ‘<span style="color:#666">.</span><span style="color:#b8860b">$cust</span>[‘last_url’] <span style="color:#666">.</span> ‘  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘First visit<span style="color:#666">:</span> ‘<span style="color:#666">.</span><span style="color:#b8860b">$cust</span>[‘first_visit_at’] <span style="color:#666">.</span> ‘  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Last visit<span style="color:#666">:</span> ‘<span style="color:#666">.</span><span style="color:#b8860b">$cust</span>[‘last_visit_at’] <span style="color:#666">.</span> ‘  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘<span style="color:#666">======================</span>  
</span></span><span style="display:flex;"><span>‘;  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">//Get any particular customer, if he’s currently logged in or not…..  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$collection</span><span style="color:#666">-&gt;</span><span style="color:#b44">addFieldToFilter</span>(‘customer_id’, <span style="color:#666">5</span>)<span style="color:#666">-&gt;</span><span style="color:#b44">addCustomerData</span>(); <span style="color:#080;font-style:italic">//5 is customer ID of customer you want to check  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#b8860b">$collection</span><span style="color:#666">-&gt;</span><span style="color:#b44">count</span>()) {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Customer is logged in’;  
</span></span><span style="display:flex;"><span>} <span style="color:#a2f;font-weight:bold">else</span> {  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> ‘Customer is <span style="color:#a2f;font-weight:bold">NOT</span> logged in’;  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Register guest user to website if email provided</title>
      <link>http://localhost:1313/magento-register-guest-user-to-website-if-email-provided/</link>
      <pubDate>Sat, 31 Dec 2011 13:03:10 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-register-guest-user-to-website-if-email-provided/</guid>
      <description>&lt;p&gt;If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.&lt;/p&gt;&#xA;&lt;p&gt;So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.</p>
<p>So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$e</span> <span style="color:#666">=</span> <span style="color:#b8860b">$email</span>; <span style="color:#080;font-style:italic">//provided by guest user
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$store</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">app</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getStore</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$websiteId</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">app</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getWebsite</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘customer<span style="color:#666">/</span>customer’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">website_id</span> <span style="color:#666">=</span> <span style="color:#b8860b">$websiteId</span>;  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setStore</span>(<span style="color:#b8860b">$store</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$prefix</span> <span style="color:#666">=</span> “mag”;  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$pwd</span> <span style="color:#666">=</span> uniqid(<span style="color:#b8860b">$prefix</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$session</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘checkout<span style="color:#666">/</span>session’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$fname</span> <span style="color:#666">=</span> <span style="color:#b8860b">$session</span><span style="color:#666">-&gt;</span><span style="color:#b44">getFirstname</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$lname</span> <span style="color:#666">=</span> <span style="color:#b8860b">$session</span><span style="color:#666">-&gt;</span><span style="color:#b44">getLastname</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="">$</span>customerObj<span style="color:#666">-&gt;</span><span style="color:#b44">setEmail</span>(<span style="color:#b8860b">$e</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setFirstname</span>(‘Guest’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setLastname</span>(‘Guest’);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">setPassword</span>(<span style="color:#b8860b">$pwd</span>);  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$customerObj</span><span style="color:#666">-&gt;</span><span style="color:#b44">sendNewAccountEmail</span>(‘confirmed’); <span style="color:#080;font-style:italic">//auto confirmed  
</span></span></span></code></pre></div>
<p>UPDATE: It depends where you want to keep this functionality on your site. I have put it in saveShippingMethodAction() function of Mage/Checkout/controllers/OnepageController.php file after extending. Don’t forget, this code should only be run if customer is guest.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Magento: Get customer details : customer id, name, email</title>
      <link>http://localhost:1313/magento-get-customer-details-customer-id-name-email/</link>
      <pubDate>Sun, 19 Jun 2011 08:55:13 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-get-customer-details-customer-id-name-email/</guid>
      <description>&lt;p&gt;Magento get the logged in customer details like customer id, name, email, etc. Check if customer is already logged in or not, if they are logged in then get all the data using customer session object and use it as per the requirement.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt; (Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSingleton&lt;/span&gt;(‘customer&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;session’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;isLoggedIn&lt;/span&gt;()) {  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$customer&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSingleton&lt;/span&gt;(‘customer&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;session’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCustomer&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$customerData&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(‘customer&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;customer’)&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;load&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$customer&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getId&lt;/span&gt;())&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getData&lt;/span&gt;();  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$customerData&lt;/span&gt;);  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&#xA;&lt;p&gt;Output:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;Array&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [entity_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [entity_type_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [attribute_set_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [website_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [email] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; john&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;doe&lt;span style=&#34;color:#666&#34;&gt;@&lt;/span&gt;example&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;com  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [group_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [increment_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;000000001&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [store_id] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [created_at] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;2007&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;30&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;23&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;13&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [updated_at] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;2008&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;08&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;08&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;12&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;28&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;24&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [is_active] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;1&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [firstname] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; John  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [lastname] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; Doe  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [password_hash] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;204948&lt;/span&gt;a4020ed1d0e4238db2277d5&lt;span style=&#34;color:#666&#34;&gt;:&lt;/span&gt;eg  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [prefix] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [middlename] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [suffix] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [taxvat] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [default_billing] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;274&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; [default_shipping] &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;274&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Magento get the logged in customer details like customer id, name, email, etc. Check if customer is already logged in or not, if they are logged in then get all the data using customer session object and use it as per the requirement.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘customer<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">isLoggedIn</span>()) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$customer</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getSingleton</span>(‘customer<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCustomer</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$customerData</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘customer<span style="color:#666">/</span>customer’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$customer</span><span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>())<span style="color:#666">-&gt;</span><span style="color:#b44">getData</span>();  
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">log</span>(<span style="color:#b8860b">$customerData</span>);  
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Output:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">Array</span>  
</span></span><span style="display:flex;"><span>(  
</span></span><span style="display:flex;"><span> [entity_id] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [entity_type_id] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [attribute_set_id] <span style="color:#666">=&gt;</span> <span style="color:#666">0</span>  
</span></span><span style="display:flex;"><span> [website_id] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [email] <span style="color:#666">=&gt;</span> john<span style="color:#666">.</span>doe<span style="color:#666">@</span>example<span style="color:#666">.</span>com  
</span></span><span style="display:flex;"><span> [group_id] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [increment_id] <span style="color:#666">=&gt;</span> <span style="color:#666">000000001</span>  
</span></span><span style="display:flex;"><span> [store_id] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [created_at] <span style="color:#666">=&gt;</span> <span style="color:#666">2007</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">30</span> <span style="color:#666">23</span><span style="color:#666">:</span><span style="color:#666">23</span><span style="color:#666">:</span><span style="color:#666">13</span>  
</span></span><span style="display:flex;"><span> [updated_at] <span style="color:#666">=&gt;</span> <span style="color:#666">2008</span><span style="color:#666">-</span><span style="color:#666">08</span><span style="color:#666">-</span><span style="color:#666">08</span> <span style="color:#666">12</span><span style="color:#666">:</span><span style="color:#666">28</span><span style="color:#666">:</span><span style="color:#666">24</span>  
</span></span><span style="display:flex;"><span> [is_active] <span style="color:#666">=&gt;</span> <span style="color:#666">1</span>  
</span></span><span style="display:flex;"><span> [firstname] <span style="color:#666">=&gt;</span> John  
</span></span><span style="display:flex;"><span> [lastname] <span style="color:#666">=&gt;</span> Doe  
</span></span><span style="display:flex;"><span> [password_hash] <span style="color:#666">=&gt;</span> <span style="color:#666">204948</span>a4020ed1d0e4238db2277d5<span style="color:#666">:</span>eg  
</span></span><span style="display:flex;"><span> [prefix] <span style="color:#666">=&gt;</span>  
</span></span><span style="display:flex;"><span> [middlename] <span style="color:#666">=&gt;</span>  
</span></span><span style="display:flex;"><span> [suffix] <span style="color:#666">=&gt;</span>  
</span></span><span style="display:flex;"><span> [taxvat] <span style="color:#666">=&gt;</span>  
</span></span><span style="display:flex;"><span> [default_billing] <span style="color:#666">=&gt;</span> <span style="color:#666">274</span>  
</span></span><span style="display:flex;"><span> [default_shipping] <span style="color:#666">=&gt;</span> <span style="color:#666">274</span>  
</span></span><span style="display:flex;"><span>)</span></span></code></pre></div></p>
<p>Getting customer details from the $customerData object:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#b8860b">$customerID</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>(); <span style="color:#080;font-style:italic">//entity_id can be used as id  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#b8860b">$name</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getFirstname</span>() <span style="color:#666">.</span> ‘ ‘ <span style="color:#666">.</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getLastname</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$isActive</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getIsActive</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$email</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getEmail</span>();  
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$incrId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$customerData</span><span style="color:#666">-&gt;</span><span style="color:#b44">getIncrementId</span>();</span></span></code></pre></div></p>
<p>Similarly, we can get lastname, email, etc. ( [website_id] = getWebsiteId() )</p>
]]></content:encoded>
    </item>
  </channel>
</rss>

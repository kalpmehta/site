<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Out of Stock on KALPESH MEHTA</title>
    <link>http://localhost:1313/blog/out-of-stock/</link>
    <description>Recent content in Out of Stock on KALPESH MEHTA</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <managingEditor>k@lpe.sh (Kalpesh Mehta)</managingEditor>
    <webMaster>k@lpe.sh (Kalpesh Mehta)</webMaster>
    <copyright>Copyright © 2025 kalpesh mehta</copyright>
    <lastBuildDate>Thu, 06 Nov 2014 20:27:28 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/blog/out-of-stock/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Magento: Get all products with quantities and Out Of Stock</title>
      <link>http://localhost:1313/magento-get-all-products-with-quantities-and-out-of-stock/</link>
      <pubDate>Thu, 06 Nov 2014 20:27:28 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-get-all-products-with-quantities-and-out-of-stock/</guid>
      <description>&lt;p&gt;Magento get all the simple products which have greater than 0 quantity and are still Out of Stock in inventory.&lt;/p&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#666&#34;&gt;&amp;lt;?&lt;/span&gt;php &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;require_once&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;app/Mage.php&amp;#39;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;umask(&lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;app&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;admin&amp;#39;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;set_time_limit(&lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b8860b&#34;&gt;$productCollection&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt; Mage&lt;span style=&#34;color:#666&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getModel&lt;/span&gt;(&lt;span style=&#34;color:#b44&#34;&gt;&amp;#39;catalog/product&amp;#39;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getCollection&lt;/span&gt;()  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;addAttributeToSelect&lt;/span&gt;(‘&lt;span style=&#34;color:#666&#34;&gt;*&lt;/span&gt;’)  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;joinField&lt;/span&gt;(‘qty’,  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ‘cataloginventory&lt;span style=&#34;color:#666&#34;&gt;/&lt;/span&gt;stock_item’,  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ‘qty’,  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ‘product_id&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;entity_id’,  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ‘{{table}}&lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt;is_in_stock&lt;span style=&#34;color:#666&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;’,  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ‘left’)  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;addAttributeToFilter&lt;/span&gt;(‘qty’, &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;array&lt;/span&gt;(“gt” &lt;span style=&#34;color:#666&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#666&#34;&gt;0&lt;/span&gt;));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; “&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;## Simple Products with &amp;gt;0 quantity and Out of Stock&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;“;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;foreach&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$productCollection&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;as&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$product&lt;/span&gt;) { &lt;span style=&#34;color:#080;font-style:italic&#34;&gt;//print_r($product-&amp;gt;getData());exit;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080;font-style:italic&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#b8860b&#34;&gt;$product&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getTypeId&lt;/span&gt;() &lt;span style=&#34;color:#666&#34;&gt;==&lt;/span&gt; ‘simple’)  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$product&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getName&lt;/span&gt;() &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; ” &lt;span style=&#34;color:#666&#34;&gt;|&lt;/span&gt; ” &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; &lt;span style=&#34;color:#b8860b&#34;&gt;$product&lt;/span&gt;&lt;span style=&#34;color:#666&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#b44&#34;&gt;getSku&lt;/span&gt;() &lt;span style=&#34;color:#666&#34;&gt;.&lt;/span&gt; “  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;“;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a2f;font-weight:bold&#34;&gt;echo&lt;/span&gt; ‘Done’;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#080&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span style=&#34;&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>Magento get all the simple products which have greater than 0 quantity and are still Out of Stock in inventory.</p>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#666">&lt;?</span>php <span style="color:#a2f;font-weight:bold">require_once</span>(<span style="color:#b44">&#39;app/Mage.php&#39;</span>);
</span></span><span style="display:flex;"><span>umask(<span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>Mage<span style="color:#666">::</span><span style="color:#b44">app</span>(<span style="color:#b44">&#39;admin&#39;</span>);
</span></span><span style="display:flex;"><span>set_time_limit(<span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#b8860b">$productCollection</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(<span style="color:#b44">&#39;catalog/product&#39;</span>)
</span></span><span style="display:flex;"><span>     <span style="color:#666">-&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#b44">getCollection</span>()  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">addAttributeToSelect</span>(‘<span style="color:#666">*</span>’)  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">joinField</span>(‘qty’,  
</span></span><span style="display:flex;"><span> ‘cataloginventory<span style="color:#666">/</span>stock_item’,  
</span></span><span style="display:flex;"><span> ‘qty’,  
</span></span><span style="display:flex;"><span> ‘product_id<span style="color:#666">=</span>entity_id’,  
</span></span><span style="display:flex;"><span> ‘{{table}}<span style="color:#666">.</span>is_in_stock<span style="color:#666">=</span><span style="color:#666">0</span>’,  
</span></span><span style="display:flex;"><span> ‘left’)  
</span></span><span style="display:flex;"><span> <span style="color:#666">-&gt;</span><span style="color:#b44">addAttributeToFilter</span>(‘qty’, <span style="color:#a2f;font-weight:bold">array</span>(“gt” <span style="color:#666">=&gt;</span> <span style="color:#666">0</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">echo</span> “
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">## Simple Products with &gt;0 quantity and Out of Stock
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>“;  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">foreach</span>(<span style="color:#b8860b">$productCollection</span> <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$product</span>) { <span style="color:#080;font-style:italic">//print_r($product-&gt;getData());exit;  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#b8860b">$product</span><span style="color:#666">-&gt;</span><span style="color:#b44">getTypeId</span>() <span style="color:#666">==</span> ‘simple’)  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">echo</span> <span style="color:#b8860b">$product</span><span style="color:#666">-&gt;</span><span style="color:#b44">getName</span>() <span style="color:#666">.</span> ” <span style="color:#666">|</span> ” <span style="color:#666">.</span> <span style="color:#b8860b">$product</span><span style="color:#666">-&gt;</span><span style="color:#b44">getSku</span>() <span style="color:#666">.</span> “  
</span></span><span style="display:flex;"><span>“;  
</span></span><span style="display:flex;"><span>}  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">echo</span> ‘Done’;  
</span></span><span style="display:flex;"><span><span style="color:#080">?&gt;</span><span style="">
</span></span></span></code></pre></div>
]]></content:encoded>
    </item>
    <item>
      <title>Magento auto remove out of stock items from shopping cart</title>
      <link>http://localhost:1313/magento-auto-remove-out-of-stock-items-from-shopping-cart/</link>
      <pubDate>Fri, 22 Aug 2014 03:43:35 +0000</pubDate><author>k@lpe.sh (Kalpesh Mehta)</author>
      <guid>http://localhost:1313/magento-auto-remove-out-of-stock-items-from-shopping-cart/</guid>
      <description>&lt;p&gt;Magento automatically remove product items from shopping cart page which are out of stock. You may need this feature when the situation aries where product goes out of stock and that particular product is already there in other customer’s cart who have not yet checked it out. With this script Magento will auto-check if all the items in the cart are available and in-stock before proceeding for checkout page.&lt;/p&gt;&#xA;&lt;p&gt;In config.xml file:&lt;br&gt;&#xA;&#xA;&#xA;&#xA;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;events&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;controller_action_predispatch_checkout_cart_index&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;namespace_module_autoremove_outofstock&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;singleton&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;class&amp;gt;&lt;/span&gt;namespace_module/observer&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/class&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;method&amp;gt;&lt;/span&gt;autoRemoveOutOfStockItems&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/method&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/namespace_module_autoremove_outofstock&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/observers&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/controller_action_predispatch_checkout_cart_index&amp;gt;&lt;/span&gt;  &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#008000;font-weight:bold&#34;&gt;&amp;lt;/events&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Magento automatically remove product items from shopping cart page which are out of stock. You may need this feature when the situation aries where product goes out of stock and that particular product is already there in other customer’s cart who have not yet checked it out. With this script Magento will auto-check if all the items in the cart are available and in-stock before proceeding for checkout page.</p>
<p>In config.xml file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;events&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;controller_action_predispatch_checkout_cart_index&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;observers&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;namespace_module_autoremove_outofstock&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;type&gt;</span>singleton<span style="color:#008000;font-weight:bold">&lt;/type&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;class&gt;</span>namespace_module/observer<span style="color:#008000;font-weight:bold">&lt;/class&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;method&gt;</span>autoRemoveOutOfStockItems<span style="color:#008000;font-weight:bold">&lt;/method&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/namespace_module_autoremove_outofstock&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/observers&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#008000;font-weight:bold">&lt;/controller_action_predispatch_checkout_cart_index&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/events&gt;</span>  </span></span></code></pre></div></p>
<p>In Observer.php file:<br>




<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">function</span> <span style="color:#00a000">autoRemoveOutOfStockItems</span>(<span style="color:#b8860b">$observer</span>) {  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$quote</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘checkout<span style="color:#666">/</span>session’)<span style="color:#666">-&gt;</span><span style="color:#b44">getQuote</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$cartItems</span> <span style="color:#666">=</span> <span style="color:#b8860b">$quote</span><span style="color:#666">-&gt;</span><span style="color:#b44">getAllItems</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">foreach</span> (<span style="color:#b8860b">$cartItems</span> <span style="color:#a2f;font-weight:bold">as</span> <span style="color:#b8860b">$item</span>)  
</span></span><span style="display:flex;"><span> {  
</span></span><span style="display:flex;"><span> <span style="color:#080;font-style:italic">//$productType = $item-&gt;getProduct()-&gt;getTypeId();  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> <span style="color:#080;font-style:italic">//if($productType!=’configurable’) {  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> <span style="color:#b8860b">$productId</span> <span style="color:#666">=</span> <span style="color:#b8860b">$item</span><span style="color:#666">-&gt;</span><span style="color:#b44">getProductId</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$product</span> <span style="color:#666">=</span> Mage<span style="color:#666">::</span><span style="color:#b44">getModel</span>(‘catalog<span style="color:#666">/</span>product’)<span style="color:#666">-&gt;</span><span style="color:#b44">load</span>(<span style="color:#b8860b">$productId</span>);  
</span></span><span style="display:flex;"><span> <span style="color:#b8860b">$stockItem</span> <span style="color:#666">=</span> <span style="color:#b8860b">$product</span><span style="color:#666">-&gt;</span><span style="color:#b44">getStockItem</span>();  
</span></span><span style="display:flex;"><span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span><span style="color:#b8860b">$stockItem</span><span style="color:#666">-&gt;</span><span style="color:#b44">getIsInStock</span>())  
</span></span><span style="display:flex;"><span> {  
</span></span><span style="display:flex;"><span> Mage<span style="color:#666">::</span><span style="color:#b44">helper</span>(‘checkout<span style="color:#666">/</span>cart’)<span style="color:#666">-&gt;</span><span style="color:#b44">getCart</span>()<span style="color:#666">-&gt;</span><span style="color:#b44">removeItem</span>(<span style="color:#b8860b">$item</span><span style="color:#666">-&gt;</span><span style="color:#b44">getId</span>())<span style="color:#666">-&gt;</span><span style="color:#b44">save</span>();  
</span></span><span style="display:flex;"><span> }  
</span></span><span style="display:flex;"><span> <span style="color:#080;font-style:italic">//}  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}  
</span></span></code></pre></div></p>
]]></content:encoded>
    </item>
  </channel>
</rss>

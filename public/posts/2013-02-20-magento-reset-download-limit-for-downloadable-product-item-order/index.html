<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>Magento: Reset download limit for downloadable product item/order | Hugo ʕ•ᴥ•ʔ Bear Blog</title>
<meta name="title" content="Magento: Reset download limit for downloadable product item/order" />
<meta name="description" content="In Magento, downloadable products are the products which can be downloaded and does not require any shipping. When customer purchases this type of products, they get certain download limits to download their purchased items. This can be set in Products page in admin under “Downloadable Products” tab. In many cases store owner only want to give certain amount of downloads, so customers can’t download beyond that limit. But it may happen that due to bad internet or some interrupts downloads can’t be successful and customer want to reset that limit. For doing this, there is no option in backend to reset the download limits for the downloadable product items or for an entire order, and unfortunately admin use to re-order to achieve this." />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="downloadable product item order reset,magento reset download limit,reset downloads order item," />






  
  <meta property="og:url" content="http://localhost:1313/posts/2013-02-20-magento-reset-download-limit-for-downloadable-product-item-order/">
  <meta property="og:site_name" content="Hugo ʕ•ᴥ•ʔ Bear Blog">
  <meta property="og:title" content="Magento: Reset download limit for downloadable product item/order">
  <meta property="og:description" content="In Magento, downloadable products are the products which can be downloaded and does not require any shipping. When customer purchases this type of products, they get certain download limits to download their purchased items. This can be set in Products page in admin under “Downloadable Products” tab. In many cases store owner only want to give certain amount of downloads, so customers can’t download beyond that limit. But it may happen that due to bad internet or some interrupts downloads can’t be successful and customer want to reset that limit. For doing this, there is no option in backend to reset the download limits for the downloadable product items or for an entire order, and unfortunately admin use to re-order to achieve this.">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2013-02-20T08:21:32+00:00">
    <meta property="article:modified_time" content="2013-02-20T08:21:32+00:00">
    <meta property="article:tag" content="Downloadable Product Item Order Reset">
    <meta property="article:tag" content="Magento Reset Download Limit">
    <meta property="article:tag" content="Reset Downloads Order Item">
    <meta property="og:image" content="http://localhost:1313/images/share.png">


  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/images/share.png">
  <meta name="twitter:title" content="Magento: Reset download limit for downloadable product item/order">
  <meta name="twitter:description" content="In Magento, downloadable products are the products which can be downloaded and does not require any shipping. When customer purchases this type of products, they get certain download limits to download their purchased items. This can be set in Products page in admin under “Downloadable Products” tab. In many cases store owner only want to give certain amount of downloads, so customers can’t download beyond that limit. But it may happen that due to bad internet or some interrupts downloads can’t be successful and customer want to reset that limit. For doing this, there is no option in backend to reset the download limits for the downloadable product items or for an entire order, and unfortunately admin use to re-order to achieve this.">


  
  
  <meta itemprop="name" content="Magento: Reset download limit for downloadable product item/order">
  <meta itemprop="description" content="In Magento, downloadable products are the products which can be downloaded and does not require any shipping. When customer purchases this type of products, they get certain download limits to download their purchased items. This can be set in Products page in admin under “Downloadable Products” tab. In many cases store owner only want to give certain amount of downloads, so customers can’t download beyond that limit. But it may happen that due to bad internet or some interrupts downloads can’t be successful and customer want to reset that limit. For doing this, there is no option in backend to reset the download limits for the downloadable product items or for an entire order, and unfortunately admin use to re-order to achieve this.">
  <meta itemprop="datePublished" content="2013-02-20T08:21:32+00:00">
  <meta itemprop="dateModified" content="2013-02-20T08:21:32+00:00">
  <meta itemprop="wordCount" content="282">
  <meta itemprop="image" content="http://localhost:1313/images/share.png">
  <meta itemprop="keywords" content="Downloadable Product Item Order Reset,Magento Reset Download Limit,Reset Downloads Order Item">

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Hugo ʕ•ᴥ•ʔ Bear Blog</h1></a>
<nav>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>Magento: Reset download limit for downloadable product item/order</h1>
<p class="byline">
  <time datetime='2013-02-20' pubdate>
    2013-02-20
  </time>
  · kalpesh
</p>

<content>
  <p>In Magento, downloadable products are the products which can be downloaded and does not require any shipping. When customer purchases this type of products, they get certain download limits to download their purchased items. This can be set in Products page in admin under “Downloadable Products” tab. In many cases store owner only want to give certain amount of downloads, so customers can’t download beyond that limit. But it may happen that due to bad internet or some interrupts downloads can’t be successful and customer want to reset that limit. For doing this, there is no option in backend to reset the download limits for the downloadable product items or for an entire order, and unfortunately admin use to re-order to achieve this.</p>
<p>Here is the query which will reset download limits for an entire order.<br>
{code type=php}$q = Mage::getModel(‘sales/order_item’)-&gt;getCollection()-&gt;addFieldToSelect(‘order_id’);<br>
$q-&gt;getSelect()-&gt;joinRight(‘downloadable_link_purchased_item as d’, ‘main_table.item_id = d.order_item_id’,<br>
array(‘item_id’,’number_of_downloads_used’));<br>
$q-&gt;getSelect()-&gt;where(‘main_table.order_id = ‘. (int)$orderId);<br>
$q-&gt;load();</p>
<p>//echo $q-&gt;getSelect()-&gt;__toString();exit;</p>
<p>$items = $q-&gt;getColumnValues(‘item_id’);<br>
foreach($items as $id) {<br>
Mage::getModel(‘downloadable/link_purchased_item’)-&gt;load($id)<br>
-&gt;setStatus(‘available’)-&gt;setNumberOfDownloadsUsed(0)-&gt;save();<br>
}{/code}</p>
<p>The raw SQL query for the above Magento Convention query is:<br>
UPDATE sales_flat_order_item s RIGHT JOIN downloadable_link_purchased_item d ON s.item_id = d.order_item_id SET d.number_of_downloads_used = 0 WHERE s.order_id = $orderId;</p>
<p>Here is another query that will allow you to reset download limits for a particular item in an order<br>
{code type=php}$q = Mage::getModel(‘sales/order_item’)-&gt;getCollection()-&gt;addFieldToSelect(‘order_id’);<br>
$q-&gt;getSelect()-&gt;joinRight(‘downloadable_link_purchased_item as d’, ‘main_table.item_id = d.order_item_id’,<br>
array(‘item_id’,’number_of_downloads_used’));<br>
$q-&gt;getSelect()-&gt;where(‘main_table.order_id = ‘. (int)$orderId .’ AND main_table.item_id = ‘. (int)$orderItemId);<br>
$q-&gt;load();</p>
<p>//echo $q-&gt;getSelect()-&gt;__toString();exit;</p>
<p>$items = $q-&gt;getColumnValues(‘item_id’);<br>
foreach($items as $id) {<br>
Mage::getModel(‘downloadable/link_purchased_item’)-&gt;load($id)<br>
-&gt;setStatus(‘available’)-&gt;setNumberOfDownloadsUsed(0)-&gt;save();<br>
}{/code}</p>
<p>The raw SQL query for the above Magento Convention query is:<br>
UPDATE sales_flat_order_item s RIGHT JOIN downloadable_link_purchased_item d ON s.item_id = d.order_item_id SET d.number_of_downloads_used = 0 WHERE s.order_id = $orderId AND s.item_id = $orderItemId;</p>
<p>HTH!</p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/downloadable-product-item-order-reset/">#downloadable product item order reset</a>
  
    <a class="blog-tags" href="/blog/magento-reset-download-limit/">#magento reset download limit</a>
  
    <a class="blog-tags" href="/blog/reset-downloads-order-item/">#reset downloads order item</a>
  
</p>




  </main>
  <footer><small>
  Copyright © 2020, Jane Doe. | 
</small></footer>

    
</body>

</html>

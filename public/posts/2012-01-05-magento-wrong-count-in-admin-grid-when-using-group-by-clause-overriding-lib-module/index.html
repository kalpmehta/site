<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module | Hugo ʕ•ᴥ•ʔ Bear Blog</title>
<meta name="title" content="Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module" />
<meta name="description" content="If you have noticed or not, in version 1.5 of Magento when you use GROUP BY clause in any Grid.php file in admin, the count always display wrong. Many times it displays 1 even if there are hundreds of records. Due to this your pagination also doesn’t work. This is a bug in Magento. Your getSize() always returns wrong count whereas total records in grid are proper.
To fix this, you need to edit one of your core file. As it’s not a good practice to edit core file, we will here override the core file.
Overriding LIB module" />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="magento admin,magento getsize error,overriding lib module,wrong count in grid,wrong record count," />






  
  <meta property="og:url" content="http://localhost:1313/posts/2012-01-05-magento-wrong-count-in-admin-grid-when-using-group-by-clause-overriding-lib-module/">
  <meta property="og:site_name" content="Hugo ʕ•ᴥ•ʔ Bear Blog">
  <meta property="og:title" content="Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module">
  <meta property="og:description" content="If you have noticed or not, in version 1.5 of Magento when you use GROUP BY clause in any Grid.php file in admin, the count always display wrong. Many times it displays 1 even if there are hundreds of records. Due to this your pagination also doesn’t work. This is a bug in Magento. Your getSize() always returns wrong count whereas total records in grid are proper.
To fix this, you need to edit one of your core file. As it’s not a good practice to edit core file, we will here override the core file.
Overriding LIB module">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2012-01-05T09:47:31+00:00">
    <meta property="article:modified_time" content="2012-01-05T09:47:31+00:00">
    <meta property="article:tag" content="Magento Admin">
    <meta property="article:tag" content="Magento Getsize Error">
    <meta property="article:tag" content="Overriding Lib Module">
    <meta property="article:tag" content="Wrong Count in Grid">
    <meta property="article:tag" content="Wrong Record Count">
    <meta property="og:image" content="http://localhost:1313/images/share.png">


  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/images/share.png">
  <meta name="twitter:title" content="Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module">
  <meta name="twitter:description" content="If you have noticed or not, in version 1.5 of Magento when you use GROUP BY clause in any Grid.php file in admin, the count always display wrong. Many times it displays 1 even if there are hundreds of records. Due to this your pagination also doesn’t work. This is a bug in Magento. Your getSize() always returns wrong count whereas total records in grid are proper.
To fix this, you need to edit one of your core file. As it’s not a good practice to edit core file, we will here override the core file.
Overriding LIB module">


  
  
  <meta itemprop="name" content="Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module">
  <meta itemprop="description" content="If you have noticed or not, in version 1.5 of Magento when you use GROUP BY clause in any Grid.php file in admin, the count always display wrong. Many times it displays 1 even if there are hundreds of records. Due to this your pagination also doesn’t work. This is a bug in Magento. Your getSize() always returns wrong count whereas total records in grid are proper.
To fix this, you need to edit one of your core file. As it’s not a good practice to edit core file, we will here override the core file.
Overriding LIB module">
  <meta itemprop="datePublished" content="2012-01-05T09:47:31+00:00">
  <meta itemprop="dateModified" content="2012-01-05T09:47:31+00:00">
  <meta itemprop="wordCount" content="199">
  <meta itemprop="image" content="http://localhost:1313/images/share.png">
  <meta itemprop="keywords" content="Magento Admin,Magento Getsize Error,Overriding Lib Module,Wrong Count in Grid,Wrong Record Count">

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Hugo ʕ•ᴥ•ʔ Bear Blog</h1></a>
<nav>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>Magento: Wrong count in admin Grid when using GROUP BY clause, overriding lib module</h1>
<p class="byline">
  <time datetime='2012-01-05' pubdate>
    2012-01-05
  </time>
  · kalpesh
</p>

<content>
  <p>If you have noticed or not, in version 1.5 of Magento when you use GROUP BY clause in any Grid.php file in admin, the count always display wrong. Many times it displays 1 even if there are hundreds of records. Due to this your pagination also doesn’t work. This is a bug in Magento. Your getSize() always returns wrong count whereas total records in grid are proper.</p>
<p>To fix this, you need to edit one of your core file. As it’s not a good practice to edit core file, we will here override the core file.<br>
Overriding LIB module</p>
<p>Copy Db.php file from magento / lib / Varien / Data / Collection / Db.php<br>
Paste it to your local directory so the resultant folder structure would look like this:<br>
magento / app / code / local / Varien / Data / Collection / Db.php</p>
<p>Now open this file to edit and replace getSelectCountSql function with below one<br>
{code type=php} public function getSelectCountSql()<br>
{<br>
$this-&gt;_renderFilters();</p>
<p>$countSelect = clone $this-&gt;getSelect();<br>
$countSelect-&gt;reset(Zend_Db_Select::ORDER);<br>
$countSelect-&gt;reset(Zend_Db_Select::LIMIT_COUNT);<br>
$countSelect-&gt;reset(Zend_Db_Select::LIMIT_OFFSET);<br>
$countSelect-&gt;reset(Zend_Db_Select::COLUMNS);</p>
<p>if(count($this-&gt;getSelect()-&gt;getPart(Zend_Db_Select::GROUP)) &gt; 0) {<br>
$countSelect-&gt;reset(Zend_Db_Select::GROUP);<br>
$countSelect-&gt;distinct(true);<br>
$group = $this-&gt;getSelect()-&gt;getPart(Zend_Db_Select::GROUP);<br>
$countSelect-&gt;columns(“COUNT(DISTINCT “.implode(“, “, $group).”)”);<br>
} else {<br>
$countSelect-&gt;columns(‘COUNT(*)’);<br>
}<br>
return $countSelect;<br>
}{/code}</p>
<p><em>Updated the method for generic use</em></p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/magento-admin/">#magento admin</a>
  
    <a class="blog-tags" href="/blog/magento-getsize-error/">#magento getsize error</a>
  
    <a class="blog-tags" href="/blog/overriding-lib-module/">#overriding lib module</a>
  
    <a class="blog-tags" href="/blog/wrong-count-in-grid/">#wrong count in grid</a>
  
    <a class="blog-tags" href="/blog/wrong-record-count/">#wrong record count</a>
  
</p>




  </main>
  <footer><small>
  Copyright © 2020, Jane Doe. | 
</small></footer>

    
</body>

</html>

<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>Magento: Get real IP address behind a proxy | Kalpesh Mehta&#39;s Blog</title>
<meta name="title" content="Magento: Get real IP address behind a proxy" />
<meta name="description" content="Get real IP address if your server or customer is behind a proxy network. Magento have function Mage::helper(‘core/http’)-&gt;getRemoteAddr(); to get client IP address, but it gives proxy IP address instead of real IP if there is proxy network in between. Below code checks and returns both real IP and proxy IP address if it founds any.
{code type=php}if (!empty($_SERVER[‘HTTP_CLIENT_IP’])) {
echo $_SERVER[‘HTTP_CLIENT_IP’];
} else if (!empty($_SERVER[‘HTTP_X_FORWARDED_FOR’])) {
$ips = explode(‘,’, $_SERVER[‘HTTP_X_FORWARDED_FOR’]);
echo trim($ips[count($ips) – 1]); //real IP address behind proxy IP
// echo $_SERVER[‘REMOTE_ADDR’]; //proxy IP address
} else {
echo $_SERVER[‘REMOTE_ADDR’]; //no proxy found
}{/code}" />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="ip address,magento,proxy," />






  





  













<meta property="og:title" content="Magento: Get real IP address behind a proxy" />
<meta property="og:description" content="Get real IP address if your server or customer is behind a proxy network. Magento have function Mage::helper(‘core/http’)-&gt;getRemoteAddr(); to get client IP address, but it gives proxy IP address instead of real IP if there is proxy network in between. Below code checks and returns both real IP and proxy IP address if it founds any.
{code type=php}if (!empty($_SERVER[‘HTTP_CLIENT_IP’])) {
echo $_SERVER[‘HTTP_CLIENT_IP’];
} else if (!empty($_SERVER[‘HTTP_X_FORWARDED_FOR’])) {
$ips = explode(‘,’, $_SERVER[‘HTTP_X_FORWARDED_FOR’]);
echo trim($ips[count($ips) – 1]); //real IP address behind proxy IP
// echo $_SERVER[‘REMOTE_ADDR’]; //proxy IP address
} else {
echo $_SERVER[‘REMOTE_ADDR’]; //no proxy found
}{/code}" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2014-11-07-magento-real-ip-address-behind-proxy/" />

<meta property="og:image" content="http://localhost:1313/images/social_card_bg_hu_55848e0b3abcd6d0.webp"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2014-11-07T18:48:19+00:00" />
<meta property="article:modified_time" content="2014-11-07T18:48:19+00:00" /><meta property="og:site_name" content="Kalpesh Mehta" />
<meta property="fb:admins" content="0000000000" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://localhost:1313/images/social_card_bg_hu_55848e0b3abcd6d0.webp"/>
<meta name="twitter:title" content="Magento: Get real IP address behind a proxy"/>
<meta name="twitter:description" content="Get real IP address if your server or customer is behind a proxy network. Magento have function Mage::helper(‘core/http’)-&gt;getRemoteAddr(); to get client IP address, but it gives proxy IP address instead of real IP if there is proxy network in between. Below code checks and returns both real IP and proxy IP address if it founds any.
{code type=php}if (!empty($_SERVER[‘HTTP_CLIENT_IP’])) {
echo $_SERVER[‘HTTP_CLIENT_IP’];
} else if (!empty($_SERVER[‘HTTP_X_FORWARDED_FOR’])) {
$ips = explode(‘,’, $_SERVER[‘HTTP_X_FORWARDED_FOR’]);
echo trim($ips[count($ips) – 1]); //real IP address behind proxy IP
// echo $_SERVER[‘REMOTE_ADDR’]; //proxy IP address
} else {
echo $_SERVER[‘REMOTE_ADDR’]; //no proxy found
}{/code}"/>
<meta name="twitter:site" content="@kalpmehta"/>



<meta itemprop="name" content="Magento: Get real IP address behind a proxy">
<meta itemprop="description" content="Get real IP address if your server or customer is behind a proxy network. Magento have function Mage::helper(‘core/http’)-&gt;getRemoteAddr(); to get client IP address, but it gives proxy IP address instead of real IP if there is proxy network in between. Below code checks and returns both real IP and proxy IP address if it founds any.
{code type=php}if (!empty($_SERVER[‘HTTP_CLIENT_IP’])) {
echo $_SERVER[‘HTTP_CLIENT_IP’];
} else if (!empty($_SERVER[‘HTTP_X_FORWARDED_FOR’])) {
$ips = explode(‘,’, $_SERVER[‘HTTP_X_FORWARDED_FOR’]);
echo trim($ips[count($ips) – 1]); //real IP address behind proxy IP
// echo $_SERVER[‘REMOTE_ADDR’]; //proxy IP address
} else {
echo $_SERVER[‘REMOTE_ADDR’]; //no proxy found
}{/code}"><meta itemprop="datePublished" content="2014-11-07T18:48:19+00:00" />
<meta itemprop="dateModified" content="2014-11-07T18:48:19+00:00" />
<meta itemprop="wordCount" content="96">

<meta itemprop="image" content="http://localhost:1313/images/social_card_bg_hu_55848e0b3abcd6d0.webp"/>


<meta itemprop="keywords" content="ip address,magento,proxy," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Kalpesh Mehta&#39;s Blog</h1></a>
<nav>
<a href='http://localhost:1313/'>Home</a>
<a href='http://localhost:1313/about-me'>About Me</a>
<a href='http://localhost:1313/contact-me'>Contact</a>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>Magento: Get real IP address behind a proxy</h1>
<p class="byline">
  <time datetime='2014-11-07' pubdate>
    2014-11-07
  </time>
  · kalpesh
</p>

<content>
  <p>Get real IP address if your server or customer is behind a proxy network. Magento have function Mage::helper(‘core/http’)-&gt;getRemoteAddr(); to get client IP address, but it gives proxy IP address instead of real IP if there is proxy network in between. Below code checks and returns both real IP and proxy IP address if it founds any.</p>
<p>{code type=php}if (!empty($_SERVER[‘HTTP_CLIENT_IP’])) {<br>
echo $_SERVER[‘HTTP_CLIENT_IP’];<br>
} else if (!empty($_SERVER[‘HTTP_X_FORWARDED_FOR’])) {<br>
$ips = explode(‘,’, $_SERVER[‘HTTP_X_FORWARDED_FOR’]);<br>
echo trim($ips[count($ips) – 1]); //real IP address behind proxy IP<br>
// echo $_SERVER[‘REMOTE_ADDR’]; //proxy IP address<br>
} else {<br>
echo $_SERVER[‘REMOTE_ADDR’]; //no proxy found<br>
}{/code}</p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/ip-address/">#ip address</a>
  
    <a class="blog-tags" href="/blog/magento/">#magento</a>
  
    <a class="blog-tags" href="/blog/proxy/">#proxy</a>
  
</p>


  <p>
    <a href='mailto:k@lpe.sh?subject=Reply%20to%20"Magento%3a%20Get%20real%20IP%20address%20behind%20a%20proxy"'>
      Reply to this post by email ↪
    </a>
  </p>



  </main>
  <footer><small>
  Copyright © 2025, Kalpesh Mehta. | 
</small></footer>

    
</body>

</html>

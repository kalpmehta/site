<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>PHP Convert SimpleXML object to Array | Kalpesh Mehta&#39;s Blog</title>
<meta name="title" content="PHP Convert SimpleXML object to Array" />
<meta name="description" content="In PHP, if you want to convert your xml data to array for looping and displaying purpose, it sometimes becomes tedious. If you already have a SimpleXML class and want to convert XML to Array without any notices, warnings and recursively preparing the array, here is the method that will do so without any modifications needed. This will work by pasting this in your class file, if you are not using object oriented approach, you will have to remove “public” and “$this-&gt;” from this function." />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="convert,object to array,simplexml to array," />






  





  













<meta property="og:title" content="PHP Convert SimpleXML object to Array" />
<meta property="og:description" content="In PHP, if you want to convert your xml data to array for looping and displaying purpose, it sometimes becomes tedious. If you already have a SimpleXML class and want to convert XML to Array without any notices, warnings and recursively preparing the array, here is the method that will do so without any modifications needed. This will work by pasting this in your class file, if you are not using object oriented approach, you will have to remove “public” and “$this-&gt;” from this function." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2012-02-29-php-convert-simplexml-to-array/" />

<meta property="og:image" content="http://localhost:1313/images/social_card_bg_hu_ab7df9966eee9b40.webp"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2012-02-29T12:34:47+00:00" />
<meta property="article:modified_time" content="2012-02-29T12:34:47+00:00" /><meta property="og:site_name" content="Kalpesh Mehta" />
<meta property="fb:admins" content="0000000000" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://localhost:1313/images/social_card_bg_hu_ab7df9966eee9b40.webp"/>
<meta name="twitter:title" content="PHP Convert SimpleXML object to Array"/>
<meta name="twitter:description" content="In PHP, if you want to convert your xml data to array for looping and displaying purpose, it sometimes becomes tedious. If you already have a SimpleXML class and want to convert XML to Array without any notices, warnings and recursively preparing the array, here is the method that will do so without any modifications needed. This will work by pasting this in your class file, if you are not using object oriented approach, you will have to remove “public” and “$this-&gt;” from this function."/>
<meta name="twitter:site" content="@kalpmehta"/>



<meta itemprop="name" content="PHP Convert SimpleXML object to Array">
<meta itemprop="description" content="In PHP, if you want to convert your xml data to array for looping and displaying purpose, it sometimes becomes tedious. If you already have a SimpleXML class and want to convert XML to Array without any notices, warnings and recursively preparing the array, here is the method that will do so without any modifications needed. This will work by pasting this in your class file, if you are not using object oriented approach, you will have to remove “public” and “$this-&gt;” from this function."><meta itemprop="datePublished" content="2012-02-29T12:34:47+00:00" />
<meta itemprop="dateModified" content="2012-02-29T12:34:47+00:00" />
<meta itemprop="wordCount" content="201">

<meta itemprop="image" content="http://localhost:1313/images/social_card_bg_hu_ab7df9966eee9b40.webp"/>


<meta itemprop="keywords" content="convert,object to array,simplexml to array," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Kalpesh Mehta&#39;s Blog</h1></a>
<nav>
<a href='http://localhost:1313/'>Home</a>
<a href='http://localhost:1313/about-me'>About Me</a>
<a href='http://localhost:1313/contact-me'>Contact</a>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>PHP Convert SimpleXML object to Array</h1>
<p class="byline">
  <time datetime='2012-02-29' pubdate>
    2012-02-29
  </time>
  · kalpesh
</p>

<content>
  <p>In PHP, if you want to convert your xml data to array for looping and displaying purpose, it sometimes becomes tedious. If you already have a SimpleXML class and want to convert XML to Array without any notices, warnings and recursively preparing the array, here is the method that will do so without any modifications needed. This will work by pasting this in your class file, if you are not using object oriented approach, you will have to remove “public” and “$this-&gt;” from this function.</p>
<p>{code type=php}public function simpleXMLToArray(SimpleXMLElement $xml,$attributesKey=null,$childrenKey=null,$valueKey=null){</p>
<p>if($childrenKey &amp;&amp; !is_string($childrenKey)){$childrenKey = ‘@children’;}<br>
if($attributesKey &amp;&amp; !is_string($attributesKey)){$attributesKey = ‘@attributes’;}<br>
if($valueKey &amp;&amp; !is_string($valueKey)){$valueKey = ‘@values’;}</p>
<p>$return = array();<br>
$name = $xml-&gt;getName();<br>
$_value = trim((string)$xml);<br>
if(!strlen($_value)){$_value = null;};</p>
<p>if($_value!==null){<br>
if($valueKey){$return[$valueKey] = $_value;}<br>
else{$return = $_value;}<br>
}</p>
<p>$children = array();<br>
$first = true;<br>
foreach($xml-&gt;children() as $elementName =&gt; $child){<br>
$value = $this-&gt;simpleXMLToArray($child,$attributesKey, $childrenKey,$valueKey);<br>
if(isset($children[$elementName])){<br>
if(is_array($children[$elementName])){<br>
if($first){<br>
$temp = $children[$elementName];<br>
unset($children[$elementName]);<br>
$children[$elementName][] = $temp;<br>
$first=false;<br>
}<br>
$children[$elementName][] = $value;<br>
}else{<br>
$children[$elementName] = array($children[$elementName],$value);<br>
}<br>
}<br>
else{<br>
$children[$elementName] = $value;<br>
}<br>
}<br>
if($children){<br>
if($childrenKey){$return[$childrenKey] = $children;}<br>
else{$return = array_merge($return,$children);}<br>
}</p>
<p>$attributes = array();<br>
foreach($xml-&gt;attributes() as $name=&gt;$value){<br>
$attributes[$name] = trim($value);<br>
}<br>
if($attributes){<br>
if($attributesKey){$return[$attributesKey] = $attributes;}<br>
else{$return = array_merge($return, $attributes);}<br>
}</p>
<p>return $return;<br>
}<br>
{/code}</p>
<p>Hope this helps.</p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/convert/">#convert</a>
  
    <a class="blog-tags" href="/blog/object-to-array/">#object to array</a>
  
    <a class="blog-tags" href="/blog/simplexml-to-array/">#simplexml to array</a>
  
</p>


  <p>
    <a href='mailto:k@lpe.sh?subject=Reply%20to%20"PHP%20Convert%20SimpleXML%20object%20to%20Array"'>
      Reply to this post by email ↪
    </a>
  </p>



  </main>
  <footer><small>
  Copyright © 2025, Kalpesh Mehta. | 
</small></footer>

    
</body>

</html>

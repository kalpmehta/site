<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>Magento: Get all category and subcategory products | Kalpesh Mehta&#39;s Blog</title>
<meta name="title" content="Magento: Get all category and subcategory products" />
<meta name="description" content="Magento get all category and subcategory products which are assigned to categories at different levels. Below script will show you all the categories, and all the associated product names under each of those categories.
{code type=php}&lt;?php require_once(&lsquo;app/Mage.php&rsquo;);
umask(0);
Mage::app(&lsquo;admin&rsquo;);
set_time_limit(0);
$category = Mage::getModel(&lsquo;catalog/category&rsquo;);
$tree = $category-?&gt;
getTreeModel();
$tree-&gt;load();
$ids = $tree-&gt;getCollection()-&gt;getAllIds();
if ($ids)
{
foreach ($ids as $id)
{
$cat = Mage::getModel(‘catalog/category’);
$cat-&gt;load($id);
if($cat-&gt;getLevel()==3 &amp;&amp; $cat-&gt;getIsActive()==1)
{
$category1 = Mage::getModel(‘catalog/category’)-&gt;load($cat-&gt;getId());
$products = Mage::getResourceModel(‘catalog/product_collection’)
-&gt;addAttributeToSelect(‘name’)
-&gt;addCategoryFilter($category1);
echo ““.$cat-&gt;getName().”
“;
foreach ($products as $product) { //print_r($product-&gt;getData());exit;
echo ” ” . $product-&gt;getName() . ” – “. $product-&gt;getSku() . “
“;
}
}
}
}
?&gt;{/code}" />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="category,magento,products,subcategory," />






  





  













<meta property="og:title" content="Magento: Get all category and subcategory products" />
<meta property="og:description" content="Magento get all category and subcategory products which are assigned to categories at different levels. Below script will show you all the categories, and all the associated product names under each of those categories.
{code type=php}&lt;?php require_once(&lsquo;app/Mage.php&rsquo;);
umask(0);
Mage::app(&lsquo;admin&rsquo;);
set_time_limit(0);
$category = Mage::getModel(&lsquo;catalog/category&rsquo;);
$tree = $category-?&gt;
getTreeModel();
$tree-&gt;load();
$ids = $tree-&gt;getCollection()-&gt;getAllIds();
if ($ids)
{
foreach ($ids as $id)
{
$cat = Mage::getModel(‘catalog/category’);
$cat-&gt;load($id);
if($cat-&gt;getLevel()==3 &amp;&amp; $cat-&gt;getIsActive()==1)
{
$category1 = Mage::getModel(‘catalog/category’)-&gt;load($cat-&gt;getId());
$products = Mage::getResourceModel(‘catalog/product_collection’)
-&gt;addAttributeToSelect(‘name’)
-&gt;addCategoryFilter($category1);
echo ““.$cat-&gt;getName().”
“;
foreach ($products as $product) { //print_r($product-&gt;getData());exit;
echo ” ” . $product-&gt;getName() . ” – “. $product-&gt;getSku() . “
“;
}
}
}
}
?&gt;{/code}" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2014-11-06-magento-get-all-category-and-subcategory-products/" />

<meta property="og:image" content="http://localhost:1313/images/social_card_bg_hu_3c55cf525b9994c8.webp"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2014-11-06T20:37:45+00:00" />
<meta property="article:modified_time" content="2014-11-06T20:37:45+00:00" /><meta property="og:site_name" content="Kalpesh Mehta" />
<meta property="fb:admins" content="0000000000" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://localhost:1313/images/social_card_bg_hu_3c55cf525b9994c8.webp"/>
<meta name="twitter:title" content="Magento: Get all category and subcategory products"/>
<meta name="twitter:description" content="Magento get all category and subcategory products which are assigned to categories at different levels. Below script will show you all the categories, and all the associated product names under each of those categories.
{code type=php}&lt;?php require_once(&lsquo;app/Mage.php&rsquo;);
umask(0);
Mage::app(&lsquo;admin&rsquo;);
set_time_limit(0);
$category = Mage::getModel(&lsquo;catalog/category&rsquo;);
$tree = $category-?&gt;
getTreeModel();
$tree-&gt;load();
$ids = $tree-&gt;getCollection()-&gt;getAllIds();
if ($ids)
{
foreach ($ids as $id)
{
$cat = Mage::getModel(‘catalog/category’);
$cat-&gt;load($id);
if($cat-&gt;getLevel()==3 &amp;&amp; $cat-&gt;getIsActive()==1)
{
$category1 = Mage::getModel(‘catalog/category’)-&gt;load($cat-&gt;getId());
$products = Mage::getResourceModel(‘catalog/product_collection’)
-&gt;addAttributeToSelect(‘name’)
-&gt;addCategoryFilter($category1);
echo ““.$cat-&gt;getName().”
“;
foreach ($products as $product) { //print_r($product-&gt;getData());exit;
echo ” ” . $product-&gt;getName() . ” – “. $product-&gt;getSku() . “
“;
}
}
}
}
?&gt;{/code}"/>
<meta name="twitter:site" content="@kalpmehta"/>



<meta itemprop="name" content="Magento: Get all category and subcategory products">
<meta itemprop="description" content="Magento get all category and subcategory products which are assigned to categories at different levels. Below script will show you all the categories, and all the associated product names under each of those categories.
{code type=php}&lt;?php require_once(&lsquo;app/Mage.php&rsquo;);
umask(0);
Mage::app(&lsquo;admin&rsquo;);
set_time_limit(0);
$category = Mage::getModel(&lsquo;catalog/category&rsquo;);
$tree = $category-?&gt;
getTreeModel();
$tree-&gt;load();
$ids = $tree-&gt;getCollection()-&gt;getAllIds();
if ($ids)
{
foreach ($ids as $id)
{
$cat = Mage::getModel(‘catalog/category’);
$cat-&gt;load($id);
if($cat-&gt;getLevel()==3 &amp;&amp; $cat-&gt;getIsActive()==1)
{
$category1 = Mage::getModel(‘catalog/category’)-&gt;load($cat-&gt;getId());
$products = Mage::getResourceModel(‘catalog/product_collection’)
-&gt;addAttributeToSelect(‘name’)
-&gt;addCategoryFilter($category1);
echo ““.$cat-&gt;getName().”
“;
foreach ($products as $product) { //print_r($product-&gt;getData());exit;
echo ” ” . $product-&gt;getName() . ” – “. $product-&gt;getSku() . “
“;
}
}
}
}
?&gt;{/code}"><meta itemprop="datePublished" content="2014-11-06T20:37:45+00:00" />
<meta itemprop="dateModified" content="2014-11-06T20:37:45+00:00" />
<meta itemprop="wordCount" content="178">

<meta itemprop="image" content="http://localhost:1313/images/social_card_bg_hu_3c55cf525b9994c8.webp"/>


<meta itemprop="keywords" content="category,magento,products,subcategory," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Kalpesh Mehta&#39;s Blog</h1></a>
<nav>
<a href='http://localhost:1313/'>Home</a>
<a href='http://localhost:1313/about-me'>About Me</a>
<a href='http://localhost:1313/contact-me'>Contact</a>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>Magento: Get all category and subcategory products</h1>
<p class="byline">
  <time datetime='2014-11-06' pubdate>
    2014-11-06
  </time>
  · kalpesh
</p>

<content>
  <p>Magento get all category and subcategory products which are assigned to categories at different levels. Below script will show you all the categories, and all the associated product names under each of those categories.</p>
<p>{code type=php}&lt;?php require_once(&lsquo;app/Mage.php&rsquo;);
umask(0);
Mage::app(&lsquo;admin&rsquo;);
set_time_limit(0);</p>
<p>$category = Mage::getModel(&lsquo;catalog/category&rsquo;);
$tree = $category-?&gt;
getTreeModel();<br>
$tree-&gt;load();</p>
<p>$ids = $tree-&gt;getCollection()-&gt;getAllIds();</p>
<p>if ($ids)<br>
{<br>
foreach ($ids as $id)<br>
{<br>
$cat = Mage::getModel(‘catalog/category’);<br>
$cat-&gt;load($id);<br>
if($cat-&gt;getLevel()==3 &amp;&amp; $cat-&gt;getIsActive()==1)<br>
{<br>
$category1 = Mage::getModel(‘catalog/category’)-&gt;load($cat-&gt;getId());<br>
$products = Mage::getResourceModel(‘catalog/product_collection’)<br>
-&gt;addAttributeToSelect(‘name’)<br>
-&gt;addCategoryFilter($category1);<br>
echo “<strong>“.$cat-&gt;getName().”</strong><br>
“;<br>
foreach ($products as $product) { //print_r($product-&gt;getData());exit;<br>
echo ” ” . $product-&gt;getName() . ” – “. $product-&gt;getSku() . “<br>
“;<br>
}<br>
}<br>
}<br>
}<br>
?&gt;{/code}</p>
<p>Note the line which checks category getLevel()==3, you can change this line to get different subcategory levels by adjusting it.<br>
For root category, getLevel() should be 1.<br>
For all the main/primary categories, getLevel() should be 2.<br>
For all the subcategories, getLevel() should be 3.<br>
For all the subsubcategories, getLevel() should be 4.<br>
and so on…</p>
<p>Above script will get you all the category and subcategories products, products assigned to each and every categories of your store.</p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/category/">#category</a>
  
    <a class="blog-tags" href="/blog/magento/">#magento</a>
  
    <a class="blog-tags" href="/blog/products/">#products</a>
  
    <a class="blog-tags" href="/blog/subcategory/">#subcategory</a>
  
</p>


  <p>
    <a href='mailto:k@lpe.sh?subject=Reply%20to%20"Magento%3a%20Get%20all%20category%20and%20subcategory%20products"'>
      Reply to this post by email ↪
    </a>
  </p>



  </main>
  <footer><small>
  Copyright © 2025, Kalpesh Mehta. | 
</small></footer>

    
</body>

</html>

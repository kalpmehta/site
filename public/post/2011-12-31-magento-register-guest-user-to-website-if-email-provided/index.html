<!DOCTYPE html>
<html lang="en-US">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>Magento: Register guest user to website if email provided | Kalpesh Mehta&#39;s Blog</title>
<meta name="title" content="Magento: Register guest user to website if email provided" />
<meta name="description" content="If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.
So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site." />
<meta name="author" content="kalpesh" />
<meta name="keywords" content="checkout,customer,guest,magento,register," />






  





  













<meta property="og:title" content="Magento: Register guest user to website if email provided" />
<meta property="og:description" content="If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.
So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/2011-12-31-magento-register-guest-user-to-website-if-email-provided/" />

<meta property="og:image" content="http://localhost:1313/images/social_card_bg_hu_71cab962af6783fb.webp"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2011-12-31T13:03:10+00:00" />
<meta property="article:modified_time" content="2011-12-31T13:03:10+00:00" /><meta property="og:site_name" content="Kalpesh Mehta" />
<meta property="fb:admins" content="0000000000" />



<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://localhost:1313/images/social_card_bg_hu_71cab962af6783fb.webp"/>
<meta name="twitter:title" content="Magento: Register guest user to website if email provided"/>
<meta name="twitter:description" content="If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.
So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site."/>
<meta name="twitter:site" content="@kalpmehta"/>



<meta itemprop="name" content="Magento: Register guest user to website if email provided">
<meta itemprop="description" content="If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.
So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site."><meta itemprop="datePublished" content="2011-12-31T13:03:10+00:00" />
<meta itemprop="dateModified" content="2011-12-31T13:03:10+00:00" />
<meta itemprop="wordCount" content="175">

<meta itemprop="image" content="http://localhost:1313/images/social_card_bg_hu_71cab962af6783fb.webp"/>


<meta itemprop="keywords" content="checkout,customer,guest,magento,register," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/original.min.css" rel="stylesheet">

  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>Kalpesh Mehta&#39;s Blog</h1></a>
<nav>
<a href='http://localhost:1313/'>Home</a>
<a href='http://localhost:1313/about-me'>About Me</a>
<a href='http://localhost:1313/contact-me'>Contact</a>
<a href='http://localhost:1313/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>Magento: Register guest user to website if email provided</h1>
<p class="byline">
  <time datetime='2011-12-31' pubdate>
    2011-12-31
  </time>
  · kalpesh
</p>

<content>
  <p>If your Magento website have feature where guest user can place an order without registering themself in your site, you can add them as a customer in your database. It helps in grouping the orders w.r.t email address in backend sales order. The only condition is that he should provide his email address while placing an order, which is quite obvious.</p>
<p>So here is a snippet of code you can insert where you are asking user to enter his email address. Just check if the user is already not registered in your site.</p>
<p>{code type=php}$e = $email; //provided by guest user</p>
<p>$store = Mage::app()-&gt;getStore();<br>
$websiteId = Mage::app()-&gt;getWebsite()-&gt;getId();</p>
<p>$customerObj = Mage::getModel(‘customer/customer’);<br>
$customerObj-&gt;website_id = $websiteId;<br>
$customerObj-&gt;setStore($store);</p>
<p>$prefix = “mag”;<br>
$pwd = uniqid($prefix);</p>
<p>$session = Mage::getSingleton(‘checkout/session’);<br>
$fname = $session-&gt;getFirstname();<br>
$lname = $session-&gt;getLastname();</p>
<p>$customerObj-&gt;setEmail($e);<br>
$customerObj-&gt;setFirstname(‘Guest’);<br>
$customerObj-&gt;setLastname(‘Guest’);<br>
$customerObj-&gt;setPassword($pwd);<br>
$customerObj-&gt;save();<br>
$customerObj-&gt;sendNewAccountEmail(‘confirmed’); //auto confirmed<br>
{/code}</p>
<p>UPDATE: It depends where you want to keep this functionality on your site. I have put it in saveShippingMethodAction() function of Mage/Checkout/controllers/OnepageController.php file after extending. Don’t forget, this code should only be run if customer is guest.</p>

</content>
<p>
  
    <a class="blog-tags" href="/blog/checkout/">#checkout</a>
  
    <a class="blog-tags" href="/blog/customer/">#customer</a>
  
    <a class="blog-tags" href="/blog/guest/">#guest</a>
  
    <a class="blog-tags" href="/blog/magento/">#magento</a>
  
    <a class="blog-tags" href="/blog/register/">#register</a>
  
</p>


  <p>
    <a href='mailto:k@lpe.sh?subject=Reply%20to%20"Magento%3a%20Register%20guest%20user%20to%20website%20if%20email%20provided"'>
      Reply to this post by email ↪
    </a>
  </p>



  </main>
  <footer><small>
  Copyright © 2025, Kalpesh Mehta. | 
</small></footer>

    
</body>

</html>
